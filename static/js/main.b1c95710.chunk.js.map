{"version":3,"sources":["styles/images/obs.png","lib/stats/definitions/firstBlood.ts","lib/stats/definitions/lCancelAccuracy.ts","lib/stats/definitions/neutralOpenerMoves.ts","lib/stats/definitions/index.js","lib/stats/compute.ts","lib/stats/params.ts","lib/stats/filterGames.js","lib/readFile.ts","containers/StatOptions/index.tsx","styles/images/powered-by.png","containers/StatOptions/Option.tsx","containers/StatOptions/StatOptionItem.tsx","containers/StatOptions/StatOptionList.tsx","styles/opacity.ts","lib/util.ts","lib/portColor.ts","lib/demo.ts","styles/theme.tsx","lib/searchParams.ts","views/RandomView.tsx","store/reducers.ts","store/context.tsx","components/ExternalLink.tsx","components/Header.tsx","components/DropPad.tsx","components/ErrorMessage.tsx","lib/resources.ts","components/FileList/FileItem.tsx","components/FileList/index.tsx","containers/FileListInput.tsx","views/MainView.tsx","components/CopyToClipboard.tsx","components/OBSDragButton.tsx","lib/hooks/useParam.ts","lib/hooks/useKeyPress.ts","lib/hooks/useOnClickOutside.ts","components/ColorPicker/ColorPicker.tsx","components/ColorPicker/DualColorPicker.tsx","containers/Options/Panel.tsx","containers/Options/index.tsx","containers/CharDisplay.tsx","components/Block/Block.tsx","components/InlineEdit/index.tsx","components/Block/EditBlock.tsx","containers/NameBlock.tsx","components/HeadToHead.tsx","components/StageTimer.tsx","components/GameDisplay/GameResult.tsx","components/GameDisplay/index.tsx","containers/StatDisplay/Divider.tsx","containers/StatDisplay/StatDisplayItem.tsx","components/Stat.tsx","containers/StatDisplay/Statistic.tsx","containers/StatDisplay/StatDisplayList.tsx","containers/StatDisplay/index.tsx","lib/hooks/useGames.ts","containers/RenderDisplay.tsx","views/RenderView.tsx","App.tsx","serviceWorker.ts","index.tsx","components/Buttons.tsx","lib/winner.ts","lib/stats/types.ts"],"names":["module","exports","firstBlood","name","type","betterDirection","recommendedRounding","calculate","games","playerIndex","firstBloodStocks","map","game","i","deathStocks","stats","stocks","filter","stock","endPercent","firstStock","_","orderBy","opponentIndex","ratio","reduce","count","item","length","result","simple","text","isNaN","toFixed","this","number","ATTACK_ACTION_STATES","Map","getAttackAction","id","action","get","niceName","set","lCancelAccuracy","totalLCancels","frames","playerLCancels","successful","failed","playerFailedMoves","Object","keys","playerPostFrameUpdate","players","find","player","pre","post","playerAttack","actionStateId","lCancelStatus","push","getLCancels","tally","val","neutralOpenerMoves","neutralMoves","flatMap","conversions","conversion","isForPlayer","isNeutralWin","openingType","moves","neutralMovesByMove","groupBy","neutralMoveCounts","move","first","moveId","moveUtil","getMoveName","shortName","getMoveShortName","orderedNeutralMoveCounts","topNeutralMove","simpleText","toUpperCase","require","openingsPerKill","genOverallRatioStat","damagePerOpening","neutralWins","killMoves","conversionsForPlayer","didKill","last","killMovesByMove","killMoveCounts","orderedKillMoveCounts","topKillMove","earlyKills","oppStocks","isOpp","hasEndPercent","orderedOppStocks","earliestKillStock","take","lateDeaths","playerStocks","isPlayer","orderedPlayerStocks","latestDeathStock","selfDestructs","sdCounts","playerEndedStocks","oppKillConversions","sdSum","sum","inputsPerMinute","averageKillPercent","total","sumBy","genSimpleFromRatio","highDamagePunishes","punishes","getDamageDone","punish","startPercent","orderedPunishes","topPunish","damageDone","field","fixedNum","statRatios","overallStats","keyBy","avg","averageRatios","ratios","STAT_DEFINITIONS","computeStats","statsList","firstGame","orderIndices","settings","indices","chain","clone","reverse","value","statKey","def","output","results","iIndices","port","generateGameInfo","orderedGames","metadata","startAt","getResultForPlayer","gameEnd","gameEndMethod","lrasInitiatorIndex","latestFrame","findWinner","playerInfoGen","characterName","characterId","characterUtil","getCharacterName","characterColor","getCharacterColorName","nametag","gameResult","generatePlayerInfo","stage","stageId","stageUtil","getStageName","startTime","duration","convertFrameCountToDurationString","lastFrame","Stat","OPENINGS_PER_KILL","DAMAGE_PER_OPENING","NEUTRAL_WINS","KILL_MOVES","NEUTRAL_OPENER_MOVES","FIRST_BLOOD","L_CANCEL","EARLY_KILLS","LATE_DEATHS","SELF_DESTRUCTS","INPUTS_PER_MINUTE","AVG_KILL_PERCENT","HIGH_DAMAGE_PUNISHES","DAMAGE_DONE","extractNameAndCode","playerPort","details","index","playerTag","netplayName","generateStatParams","gameDetails","filtered","gamesByIsSingles","nonSinglesGames","some","console","log","forEach","filePath","singlesGames","gamesByPorts","ports","join","gamesWithSamePorts","shift","flatGames","flatten","isEmpty","Error","filterGames","summary","generateOutput","err","error","params","lastGame","leftPlayer","rightPlayer","leftColor","getPortColor","rightColor","char1","char2","color1","color2","lastGameDetails","leftTag","leftCode","rightTag","rightCode","name1","name2","sub1","sub2","gt","gameKey","gameDuration","playerInfo","p","gameValue","s","readFileAsGameDetails","file","a","readFileAsSlippiGame","generateGameDetails","readFileAsArrayBuffer","data","arr","Int8Array","buf","Buffer","from","SlippiGame","getSettings","getFrames","getStats","getMetadata","getLatestFrame","getGameEnd","Promise","resolve","reject","fr","FileReader","onabort","onerror","readAsBinaryString","addEventListener","string","resultString","Uint8Array","charCodeAt","buffer","readAsArrayBuffer","StatOptions","props","css","align","onClick","onClose","onChange","backgroundColor","color","hideReset","onReset","Outer","styled","div","checked","isDragging","Option","draggable","handleProps","rest","children","className","xmlns","width","height","viewBox","d","fill","StatOptionItem","stat","draggableId","provided","snapshot","ref","innerRef","draggableProps","dragHandleProps","StatOptionList","statOptions","onDragEnd","destination","source","droppableId","newArray","reorder","droppableProps","option","key","statId","enabled","optionIndex","findIndex","o","newOptions","Array","toggle","placeholder","hasOpacity","initial","final","transition","frameCount","totalFrames","Math","max","moment","utc","as","format","list","startIndex","endIndex","splice","removed","PortColor","portNumber","P1","P2","P3","P4","LEGAL_STAGE_IDS","Stage","FOUNTAIN_OF_DREAMS","POKEMON_STADIUM","YOSHIS_STORY","DREAMLAND","BATTLEFIELD","FINAL_DESTINATION","getRandomArbitrary","min","random","getRandomInt","ceil","floor","generateDemoValues","paramMap","generateRandomCharacter","totalGames","sampleSize","leftWillWin","playerInfos","undefined","stageIndex","generateRandomStageId","generateRandomDuration","generateRandomGame","demoStats","Boolean","generateRandomMove","toString","generateRandomStat","charId","charInfo","getCharacterInfo","colorIndex","colors","defaultTheme","primaryColor","secondaryColor","GlobalTheme","styles","generateSearchParams","restoredParams","res","localStorage","getItem","getStoredValues","URLSearchParams","Types","RandomView","search","to","pathname","initialState","files","AppContext","createContext","state","dispatch","mainReducer","SET_DETAILS","payload","filename","fileToReplace","f","loading","SET_ERROR","ADD_FILES","currentFiles","newFiles","existingFile","REMOVE_FILE","CLEAR_ALL","reducer","AppProvider","useReducer","Provider","ExternalLink","target","rel","Header","h1","Container","isDragAccept","isDragActive","getColor","DropPad","useDropzone","getRootProps","getInputProps","isDragReject","ErrorMessage","sanitize","replacement","toLowerCase","replace","getCharacterFolderFromId","character","charFolder","colorFolder","process","getCharacterFolderFromName","getCharacterPortrait","folder","BasicFileItem","onRemove","title","CharacterIcon","winner","src","getCharacterStockIcon","style","alt","FileItem","message","stageName","frame","winnerIndex","icons","FileList","ALL_STATS","DEFAULT_STATS","getDefaultStats","current","validateStatOptions","newItems","currentItems","c","includes","FileListInput","buttonColor","history","useHistory","useContext","React","useState","setError","showOptions","setShowOptions","defaultStats","statsModified","restoredStatsString","JSON","stringify","parse","setStatOptions","onStatOptionChange","options","setItem","onDrop","useCallback","acceptedFiles","Date","getTime","promises","all","then","time","finishedProcessing","buttonText","accept","disabled","generateStatsList","linkStyle","MainView","href","CopyToClipboard","copied","setCopied","timeoutMs","onCopyTimeoutMs","copyText","onCopyText","onCopy","setTimeout","DraggableLink","OBSDragButton","wrapperRef","useRef","location","window","entries","generateLink","onDragStart","e","img","Image","obsImage","dataTransfer","setDragImage","setData","handleDragStart","blur","handleDragEnd","preventDefault","marginRight","useParam","defaultValue","setValue","useLocation","useEffect","currentValue","setParam","useKeyPress","targetKey","keyPressed","setKeyPressed","downHandler","upHandler","removeEventListener","useOnClickOutside","handler","listener","event","contains","document","ColorSquare","size","ResetButton","ColorPicker","defaultColor","show","setShow","showReset","position","hex","ColorContainer","ColorLabel","DualColorPicker","defaultLeftColor","defaultRightColor","leftLabel","rightLabel","onLeftColorChange","onRightColorChange","DualColorPanel","panelLabel","leftColorParam","leftDefault","rightColorParam","rightDefault","existingLeftColor","existingRightColor","setLeftColor","setRightColor","Panel","Content","Column","Heading","h2","Options","open","setOpen","charName1","getCharacterShortName","charName2","obsLayerName","outerRef","RIGHT_CHAR_ALIGNMENT","Character","BOWSER","SHEIK","ROY","CharDisplay","colorParam","charParam","theme","char","facing","imgSrc","side","getCharacterVSScreen","alignment","defaultAlignment","customCharAlign","getAlignment","Block","InlineEdit","onSetText","textAlign","isInputActive","_setIsInputActive","inputValue","setInputValue","setIsInputActive","isActive","onFocus","onBlur","textRef","inputRef","tab","enter","esc","focus","maxWidth","defaultProps","OptionalBlock","OptionalEditBlock","onEdit","focused","setFocused","Name","Subtitle","NameBlock","nameParam","subtitleParam","setName","sub","setSub","borderColor","BaseHeadImage","HeadImage","invWaypoint","waypoint","dim","imageSrc","HeadToHead","result1","result2","p1","p2","Text","span","image","StageTimer","stageIcon","getStageIcon","switchResult","GameResult","gameInfo","onGameInfoChange","gameWinner","highlight","winningSide","GameDisplay","info","updateGameInfo","Divider","StatDisplayItem","hasItem","isDraggingOver","StatLabel","StatContent","TextContent","OuterStat","label","leftComponent","rightComponent","NumberStat","TextStat","ConnectedNumberStat","param1","param2","field1","setField1","field2","setField2","ConnectedTextStat","Statistic","statInfo","StatDisplayList","setStats","split","items","setItems","updateStats","statIds","dropProvided","dropSnapshot","dragProvided","dragSnapshot","additionalStyles","ScoreBlock","StatDisplay","setGames","left","right","score","setScore","parseInt","char1Score","char2Score","gameInfos","gameInfoString","setGame","gameNumber","currentGameData","newValues","assign","infoString","useGames","NameBlockContainer","RenderDisplay","RenderView","showSlippiLogo","poweredByImage","hot","basename","exact","path","component","hostname","match","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","PrimaryButton","button","SecondaryButton","b","stocksRemaining","percent"],"mappings":"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","file":"static/js/main.b1c95710.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/obs.f3f8c219.png\";","import _ from \"lodash\";\n\nimport { StatDefinition } from \"../types\";\n\nexport const firstBlood: StatDefinition = {\n  name: \"First Blood\",\n  type: \"number\",\n  betterDirection: \"higher\",\n  recommendedRounding: 0,\n  calculate(games, playerIndex) {\n    // For each game return either the first blood stock if taken or null if lost\n    const firstBloodStocks = games.map((game, i) => {\n      const deathStocks = game.stats.stocks.filter((stock) => {\n        const hasEndPercent = stock.endPercent !== null;\n        return hasEndPercent;\n      });\n      const orderedDeathStocks = _.orderBy(deathStocks, [\"endFrame\"], [\"asc\"]);\n      const firstStock = orderedDeathStocks[0];\n      if (!firstStock || firstStock.opponentIndex !== playerIndex) {\n        // console.log(`player ${playerIndex} did not draw first blood in game ${i + 1}`);\n        return null;\n      }\n      return firstStock;\n    });\n    const firstBloodCount = firstBloodStocks.reduce((count, item) => (item !== null ? count + 1 : count), 0);\n    const ratio = firstBloodCount / firstBloodStocks.length;\n\n    const simple = {\n      text: isNaN(ratio) ? \"N/A\" : `${(ratio * 100).toFixed(this.recommendedRounding)}%`,\n      number: ratio,\n    };\n\n    return {\n      result: firstBloodStocks,\n      simple,\n    };\n  },\n};\n","import { FramesType } from \"@slippi/slippi-js\";\n\nimport { StatDefinition } from \"../types\";\n\n/**\n * Based on pdiot's L Cancel calculation code from here:\n *\n * https://github.com/pdiot/Slippi-Electron/blob/354f1dd73092cf844df76501936c3dceb4165328/slippi-stats-workerfile.js\n */\n\nfunction getLCancels(frames: FramesType, playerIndex: number) {\n  const playerLCancels = { successful: 0, failed: 0 };\n  const playerFailedMoves = [];\n  for (const frameNumber of Object.keys(frames)) {\n    const frameKey = +frameNumber;\n    const playerPostFrameUpdate = (frames[frameKey].players as any[]).find(\n      (player) => player.pre.playerIndex === playerIndex\n    ).post;\n    const playerAttack = getAttackAction(playerPostFrameUpdate.actionStateId);\n\n    if (playerAttack) {\n      if (playerPostFrameUpdate.lCancelStatus === 1) {\n        playerLCancels.successful++;\n      } else if (playerPostFrameUpdate.lCancelStatus === 2) {\n        playerLCancels.failed++;\n        playerFailedMoves.push(playerAttack);\n      }\n    }\n  }\n  const ratio = playerLCancels.successful / (playerLCancels.successful + playerLCancels.failed);\n  const returnValue = {\n    ...playerLCancels,\n    ratio,\n  };\n  return returnValue;\n}\n\nconst ATTACK_ACTION_STATES = new Map<\n  number,\n  {\n    id: number;\n    name: string;\n    niceName: string;\n  }\n>();\n\nATTACK_ACTION_STATES.set(44, { id: 44, name: \"Attack11\", niceName: \"Jab 1\" });\nATTACK_ACTION_STATES.set(45, { id: 45, name: \"Attack12\", niceName: \"Jab 2\" });\nATTACK_ACTION_STATES.set(46, { id: 46, name: \"Attack13\", niceName: \"Jab 3\" });\nATTACK_ACTION_STATES.set(47, { id: 47, name: \"Attack100Start\", niceName: \"Rapid jab\" });\nATTACK_ACTION_STATES.set(48, { id: 48, name: \"Attack100Loop\", niceName: \"Rapid jab\" });\nATTACK_ACTION_STATES.set(49, { id: 49, name: \"Attack100End\", niceName: \"Rapid jab\" });\nATTACK_ACTION_STATES.set(50, { id: 50, name: \"AttackDash\", niceName: \"Dash attack\" });\nATTACK_ACTION_STATES.set(51, { id: 51, name: \"AttackS3Hi\", niceName: \"Forward tilt\" });\nATTACK_ACTION_STATES.set(52, { id: 52, name: \"AttackS3HiS\", niceName: \"Forward tilt\" });\nATTACK_ACTION_STATES.set(53, { id: 53, name: \"AttackS3S\", niceName: \"Forward tilt\" });\nATTACK_ACTION_STATES.set(54, { id: 54, name: \"AttackS3LwS\", niceName: \"Forward tilt\" });\nATTACK_ACTION_STATES.set(55, { id: 55, name: \"AttackS3Lw\", niceName: \"Forward tilt\" });\nATTACK_ACTION_STATES.set(56, { id: 56, name: \"AttackHi3\", niceName: \"Up tilt\" });\nATTACK_ACTION_STATES.set(57, { id: 57, name: \"AttackLw3\", niceName: \"Down tilt\" });\nATTACK_ACTION_STATES.set(58, { id: 58, name: \"AttackS4Hi\", niceName: \"Forward smash\" });\nATTACK_ACTION_STATES.set(59, { id: 59, name: \"AttackS4HiS\", niceName: \"Forward smash\" });\nATTACK_ACTION_STATES.set(60, { id: 60, name: \"AttackS4S\", niceName: \"Forward smash\" });\nATTACK_ACTION_STATES.set(61, { id: 61, name: \"AttackS4LwS\", niceName: \"Forward smash\" });\nATTACK_ACTION_STATES.set(62, { id: 62, name: \"AttackS4Lw\", niceName: \"Forward smash\" });\nATTACK_ACTION_STATES.set(63, { id: 63, name: \"AttackHi4\", niceName: \"Up smash\" });\nATTACK_ACTION_STATES.set(64, { id: 64, name: \"AttackLw4\", niceName: \"Down smash\" });\nATTACK_ACTION_STATES.set(65, { id: 65, name: \"AttackAirN\", niceName: \"Neutral air\" });\nATTACK_ACTION_STATES.set(66, { id: 66, name: \"AttackAirF\", niceName: \"Forward air\" });\nATTACK_ACTION_STATES.set(67, { id: 67, name: \"AttackAirB\", niceName: \"Back air\" });\nATTACK_ACTION_STATES.set(68, { id: 68, name: \"AttackAirHi\", niceName: \"Up air\" });\nATTACK_ACTION_STATES.set(69, { id: 69, name: \"AttackAirLw\", niceName: \"Down air\" });\nATTACK_ACTION_STATES.set(70, { id: 70, name: \"LandingAirN\", niceName: \"Nair landing\" });\nATTACK_ACTION_STATES.set(71, { id: 71, name: \"LandingAirF\", niceName: \"Fair landing\" });\nATTACK_ACTION_STATES.set(72, { id: 72, name: \"LandingAirB\", niceName: \"Bair landing\" });\nATTACK_ACTION_STATES.set(73, { id: 73, name: \"LandingAirHi\", niceName: \"Uair landing\" });\nATTACK_ACTION_STATES.set(74, { id: 74, name: \"LandingAirLw\", niceName: \"Dair landing\" });\nATTACK_ACTION_STATES.set(212, { id: 212, name: \"Catch\", niceName: \"Grab\" });\nATTACK_ACTION_STATES.set(214, { id: 214, name: \"CatchDash\", niceName: \"Dash grab\" });\n\nfunction getAttackAction(id: number) {\n  const action = ATTACK_ACTION_STATES.get(id);\n  if (action) {\n    return action.niceName;\n  } else {\n    return null;\n  }\n}\n\nexport const lCancelAccuracy: StatDefinition = {\n  name: \"L-Cancel Accuracy\",\n  type: \"number\",\n  betterDirection: \"higher\",\n  recommendedRounding: 0,\n  calculate(games, playerIndex) {\n    const lCancelsPerGame = games.map((game) => {\n      const frames = game.frames;\n      const gameLCancels = getLCancels(frames, playerIndex);\n      return gameLCancels;\n    });\n\n    const totalLCancels = lCancelsPerGame.reduce(\n      (tally, val) => ({\n        successful: tally.successful + val.successful,\n        failed: tally.failed + val.failed,\n      }),\n      { successful: 0, failed: 0 }\n    );\n    const ratio = totalLCancels.successful / (totalLCancels.successful + totalLCancels.failed);\n\n    return {\n      result: totalLCancels,\n      simple: {\n        text: isNaN(ratio) ? \"N/A\" : `${(ratio * 100).toFixed(this.recommendedRounding)}%`,\n        number: ratio,\n      },\n    };\n  },\n};\n","import { moves as moveUtil } from \"@slippi/slippi-js\";\nimport _ from \"lodash\";\n\nimport { StatDefinition } from \"../types\";\n\nexport const neutralOpenerMoves: StatDefinition = {\n  name: \"Most Common Neutral Opener\",\n  type: \"text\",\n  calculate(games, playerIndex) {\n    const neutralMoves = _.flatMap(games, (game) => {\n      const conversions = _.get(game, [\"stats\", \"conversions\"]) ?? [];\n      const conversionsForPlayer = _.filter(conversions, (conversion) => {\n        const isForPlayer = conversion.playerIndex === playerIndex;\n        const isNeutralWin = conversion.openingType === \"neutral-win\";\n        return isForPlayer && isNeutralWin;\n      });\n\n      return conversionsForPlayer.filter(({ moves }) => moves.length > 0).map((conversion) => conversion.moves[0]);\n    });\n\n    // TODO: This following code is repeated from kill move code, put in function\n    const neutralMovesByMove = _.groupBy(neutralMoves, \"moveId\");\n    const neutralMoveCounts = _.map(neutralMovesByMove, (moves) => {\n      const move = _.first(moves);\n      const moveId = move ? move.moveId : -1;\n      return {\n        count: moves.length,\n        id: moveId,\n        name: moveUtil.getMoveName(moveId),\n        shortName: moveUtil.getMoveShortName(moveId),\n      };\n    });\n\n    const orderedNeutralMoveCounts = _.orderBy(neutralMoveCounts, [\"count\"], [\"desc\"]);\n    const topNeutralMove = _.first(orderedNeutralMoveCounts);\n    let simpleText = \"N/A\";\n    if (topNeutralMove) {\n      simpleText = `${topNeutralMove.shortName} - ${topNeutralMove.count}`;\n    }\n\n    return {\n      result: orderedNeutralMoveCounts,\n      simple: {\n        text: simpleText.toUpperCase(),\n      },\n    };\n  },\n};\n","/* eslint-disable */\n\n/*\n * Taken from: https://github.com/project-slippi/slippi-set-stats/blob/master/main.js\n */\n\nconst { moves: moveUtil } = require(\"@slippi/slippi-js\");\nconst _ = require(\"lodash\");\n\nexport * from \"./firstBlood\";\nexport * from \"./lCancelAccuracy\";\nexport * from \"./neutralOpenerMoves\";\n\nexport const openingsPerKill = {\n  name: \"Openings / Kill\",\n  type: \"number\",\n  betterDirection: \"lower\",\n  recommendedRounding: 1,\n  calculate(games, playerIndex) {\n    return genOverallRatioStat(games, playerIndex, \"openingsPerKill\", this.recommendedRounding);\n  },\n};\n\nexport const damagePerOpening = {\n  name: \"Damage / Opening\",\n  type: \"number\",\n  betterDirection: \"higher\",\n  recommendedRounding: 1,\n  calculate(games, playerIndex) {\n    return genOverallRatioStat(games, playerIndex, \"damagePerOpening\", this.recommendedRounding);\n  },\n};\n\nexport const neutralWins = {\n  name: \"Neutral Wins\",\n  type: \"number\",\n  betterDirection: \"higher\",\n  recommendedRounding: 0,\n  calculate(games, playerIndex) {\n    return genOverallRatioStat(games, playerIndex, \"neutralWinRatio\", this.recommendedRounding, \"count\");\n  },\n};\n\nexport const killMoves = {\n  name: \"Most Common Kill Move\",\n  type: \"text\",\n  calculate(games, playerIndex) {\n    const killMoves = _.flatMap(games, (game) => {\n      const conversions = _.get(game, [\"stats\", \"conversions\"]) || [];\n      const conversionsForPlayer = _.filter(conversions, (conversion) => {\n        const isForPlayer = conversion.playerIndex === playerIndex;\n        const didKill = conversion.didKill;\n        return isForPlayer && didKill;\n      });\n\n      return _.map(conversionsForPlayer, (conversion) => {\n        return _.last(conversion.moves);\n      });\n    });\n\n    const killMovesByMove = _.groupBy(killMoves, \"moveId\");\n    const killMoveCounts = _.map(killMovesByMove, (moves) => {\n      const move = _.first(moves);\n      return {\n        count: moves.length,\n        id: move.moveId,\n        name: moveUtil.getMoveName(move.moveId),\n        shortName: moveUtil.getMoveShortName(move.moveId),\n      };\n    });\n\n    const orderedKillMoveCounts = _.orderBy(killMoveCounts, [\"count\"], [\"desc\"]);\n    const topKillMove = _.first(orderedKillMoveCounts);\n    let simpleText = \"N/A\";\n    if (topKillMove) {\n      simpleText = `${topKillMove.shortName} - ${topKillMove.count}`;\n    }\n\n    return {\n      result: orderedKillMoveCounts,\n      simple: {\n        text: simpleText.toUpperCase(),\n      },\n    };\n  },\n};\n\nexport const earlyKills = {\n  name: \"Earliest Kill\",\n  type: \"number\",\n  betterDirection: \"lower\",\n  recommendedRounding: 1,\n  calculate(games, playerIndex) {\n    const oppStocks = _.flatMap(games, (game) => {\n      const stocks = _.get(game, [\"stats\", \"stocks\"]) || [];\n      return _.filter(stocks, (stock) => {\n        const isOpp = stock.playerIndex !== playerIndex;\n        const hasEndPercent = stock.endPercent !== null;\n        return isOpp && hasEndPercent;\n      });\n    });\n\n    const orderedOppStocks = _.orderBy(oppStocks, [\"endPercent\"], [\"asc\"]);\n    const earliestKillStock = _.first(orderedOppStocks);\n    const simple = {\n      text: \"N/A\",\n      number: null,\n    };\n\n    if (earliestKillStock) {\n      simple.number = earliestKillStock.endPercent;\n      simple.text = simple.number.toFixed(this.recommendedRounding);\n    }\n\n    return {\n      result: _.take(orderedOppStocks, 5),\n      simple: simple,\n    };\n  },\n};\n\nexport const lateDeaths = {\n  name: \"Latest Death\",\n  type: \"number\",\n  betterDirection: \"higher\",\n  recommendedRounding: 0,\n  calculate(games, playerIndex) {\n    const playerStocks = _.flatMap(games, (game) => {\n      const stocks = _.get(game, [\"stats\", \"stocks\"]) || [];\n      return _.filter(stocks, (stock) => {\n        const isPlayer = stock.playerIndex === playerIndex;\n        const hasEndPercent = stock.endPercent !== null;\n        return isPlayer && hasEndPercent;\n      });\n    });\n\n    const orderedPlayerStocks = _.orderBy(playerStocks, [\"endPercent\"], [\"desc\"]);\n    const latestDeathStock = _.first(orderedPlayerStocks);\n    const simple = {\n      text: \"N/A\",\n      number: null,\n    };\n\n    if (latestDeathStock) {\n      simple.number = latestDeathStock.endPercent;\n      simple.text = simple.number.toFixed(this.recommendedRounding);\n    }\n\n    return {\n      result: _.take(orderedPlayerStocks, 5),\n      simple: simple,\n    };\n  },\n};\n\nexport const selfDestructs = {\n  // Only show this one if greater than 2 for one player\n  name: \"Total Self-Destructs\",\n  type: \"number\",\n  betterDirection: \"lower\",\n  recommendedRounding: 0,\n  calculate(games, playerIndex) {\n    const sdCounts = _.map(games, (game) => {\n      const stocks = _.get(game, [\"stats\", \"stocks\"]) || [];\n      const playerEndedStocks = _.filter(stocks, (stock) => {\n        const isPlayer = stock.playerIndex === playerIndex;\n        const hasEndPercent = stock.endPercent !== null;\n        return isPlayer && hasEndPercent;\n      });\n\n      const conversions = _.get(game, [\"stats\", \"conversions\"]) || [];\n      const oppKillConversions = _.filter(conversions, (conversion) => {\n        const isOpp = conversion.playerIndex !== playerIndex;\n        const didKill = conversion.didKill;\n        return isOpp && didKill;\n      });\n\n      return playerEndedStocks.length - oppKillConversions.length;\n    });\n\n    const sdSum = _.sum(sdCounts);\n\n    return {\n      result: sdSum,\n      simple: {\n        number: sdSum,\n        text: `${sdSum}`,\n      },\n    };\n  },\n};\n\nexport const inputsPerMinute = {\n  name: \"Inputs / Minute\",\n  type: \"number\",\n  betterDirection: \"higher\",\n  recommendedRounding: 0,\n  calculate(games, playerIndex) {\n    return genOverallRatioStat(games, playerIndex, \"inputsPerMinute\", this.recommendedRounding);\n  },\n};\n\nexport const averageKillPercent = {\n  name: \"Average Kill Percent\",\n  type: \"number\",\n  betterDirection: \"lower\",\n  recommendedRounding: 0,\n  calculate(games, playerIndex) {\n    const oppStocks = _.flatMap(games, (game) => {\n      const stocks = _.get(game, [\"stats\", \"stocks\"]) || [];\n      return _.filter(stocks, (stock) => {\n        const isOpp = stock.playerIndex !== playerIndex;\n        const hasEndPercent = stock.endPercent !== null;\n        return isOpp && hasEndPercent;\n      });\n    });\n\n    const result = {\n      total: oppStocks.length,\n      count: _.sumBy(oppStocks, \"endPercent\") || 0,\n    };\n\n    result.ratio = result.total ? result.count / result.total : null;\n\n    return {\n      result: result,\n      simple: genSimpleFromRatio(result, this.recommendedRounding),\n    };\n  },\n};\n\nexport const highDamagePunishes = {\n  name: \"Highest Damage Punish\",\n  type: \"number\",\n  betterDirection: \"higher\",\n  recommendedRounding: 1,\n  calculate(games, playerIndex) {\n    const punishes = _.flatMap(games, (game) => {\n      const conversions = _.get(game, [\"stats\", \"conversions\"]) || [];\n      return _.filter(conversions, (conversion) => {\n        const isForPlayer = conversion.playerIndex === playerIndex;\n        const hasEndPercent = conversion.endPercent !== null;\n        return isForPlayer && hasEndPercent;\n      });\n    });\n\n    const getDamageDone = (punish) => punish.endPercent - punish.startPercent;\n    const orderedPunishes = _.orderBy(punishes, [getDamageDone], \"desc\");\n    const topPunish = _.first(orderedPunishes);\n    const simple = {\n      text: \"N/A\",\n      number: null,\n    };\n\n    if (topPunish) {\n      simple.number = getDamageDone(topPunish);\n      simple.text = simple.number.toFixed(this.recommendedRounding);\n    }\n\n    return {\n      result: _.take(orderedPunishes, 5),\n      simple: simple,\n    };\n  },\n};\n\nexport const damageDone = {\n  name: \"Total Damage Done\",\n  type: \"number\",\n  betterDirection: \"higher\",\n  recommendedRounding: 0,\n  calculate(games, playerIndex) {\n    return genOverallRatioStat(games, playerIndex, \"damagePerOpening\", this.recommendedRounding, \"count\");\n  },\n};\n\nfunction genOverallRatioStat(games, playerIndex, field, fixedNum, type = \"ratio\") {\n  const statRatios = _.map(games, (game) => {\n    const overallStats = _.get(game, [\"stats\", \"overall\"]);\n    const overallStatsByPlayer = _.keyBy(overallStats, \"playerIndex\");\n    const overallStatsForPlayer = overallStatsByPlayer[playerIndex];\n    return overallStatsForPlayer[field];\n  });\n\n  const avg = averageRatios(statRatios);\n  const simple = genSimpleFromRatio(avg, fixedNum, type);\n\n  return {\n    result: avg,\n    simple: simple,\n  };\n}\n\nfunction averageRatios(ratios) {\n  const result = {};\n\n  result.count = _.sumBy(ratios, \"count\") || 0;\n  result.total = _.sumBy(ratios, \"total\") || 0;\n  result.ratio = result.total ? result.count / result.total : null;\n\n  return result;\n}\n\nfunction genSimpleFromRatio(ratio, fixedNum, type = \"ratio\") {\n  const result = {};\n\n  switch (type) {\n    case \"ratio\":\n      result.number = ratio.ratio;\n      result.text = ratio.ratio !== null ? ratio.ratio.toFixed(fixedNum) : \"N/A\";\n      break;\n    case \"count\":\n      result.number = ratio.count;\n      result.text = ratio.count.toFixed(fixedNum);\n      break;\n  }\n\n  return result;\n}\n","/*\n * Based on: https://github.com/project-slippi/slippi-set-stats/blob/master/main.js\n */\n\nimport { characters as characterUtil, stages as stageUtil } from \"@slippi/slippi-js\";\nimport { PlayerType } from \"@slippi/slippi-js\";\nimport _ from \"lodash\";\n\nimport { convertFrameCountToDurationString } from \"../util\";\nimport { findWinner } from \"../winner\";\nimport {\n  averageKillPercent,\n  damageDone,\n  damagePerOpening,\n  earlyKills,\n  firstBlood,\n  highDamagePunishes,\n  inputsPerMinute,\n  killMoves,\n  lateDeaths,\n  lCancelAccuracy,\n  neutralOpenerMoves,\n  neutralWins,\n  openingsPerKill,\n  selfDestructs,\n} from \"./definitions\";\nimport { GameDetails, Stat, StatDefinition } from \"./types\";\n\nexport const STAT_DEFINITIONS = new Map<string, StatDefinition>();\nSTAT_DEFINITIONS.set(Stat.OPENINGS_PER_KILL, openingsPerKill);\nSTAT_DEFINITIONS.set(Stat.DAMAGE_PER_OPENING, damagePerOpening);\nSTAT_DEFINITIONS.set(Stat.NEUTRAL_WINS, neutralWins);\nSTAT_DEFINITIONS.set(Stat.KILL_MOVES, killMoves);\nSTAT_DEFINITIONS.set(Stat.NEUTRAL_OPENER_MOVES, neutralOpenerMoves);\nSTAT_DEFINITIONS.set(Stat.FIRST_BLOOD, firstBlood);\nSTAT_DEFINITIONS.set(Stat.L_CANCEL, lCancelAccuracy);\nSTAT_DEFINITIONS.set(Stat.EARLY_KILLS, earlyKills);\nSTAT_DEFINITIONS.set(Stat.LATE_DEATHS, lateDeaths);\nSTAT_DEFINITIONS.set(Stat.SELF_DESTRUCTS, selfDestructs);\nSTAT_DEFINITIONS.set(Stat.INPUTS_PER_MINUTE, inputsPerMinute);\nSTAT_DEFINITIONS.set(Stat.AVG_KILL_PERCENT, averageKillPercent);\nSTAT_DEFINITIONS.set(Stat.HIGH_DAMAGE_PUNISHES, highDamagePunishes);\nSTAT_DEFINITIONS.set(Stat.DAMAGE_DONE, damageDone);\n\nfunction computeStats(statsList: string[], games: GameDetails[]) {\n  const firstGame = _.first(games);\n  if (!firstGame) {\n    return [];\n  }\n\n  // console.log(firstGame);\n  const orderIndices = _.map(firstGame.settings.players, \"playerIndex\");\n  const reversedIndices = _.chain(orderIndices).clone().reverse().value();\n  const indices = [orderIndices, reversedIndices];\n\n  const statResults = statsList.map((statKey) => {\n    const def = STAT_DEFINITIONS.get(statKey);\n    if (!def || !def.calculate) {\n      return null;\n    }\n\n    const { calculate, ...output } = def;\n    const results = _.map(indices, (iIndices) => {\n      const result: any = def.calculate(games, iIndices[0] /*, iIndices[1]*/);\n      result.port = iIndices[0] + 1;\n      return result;\n    });\n\n    return {\n      ...output,\n      id: statKey,\n      results,\n    };\n  });\n\n  return statResults;\n}\n\nfunction generateGameInfo(games: GameDetails[]) {\n  const getStartAt = (game: GameDetails) => game.metadata.startAt;\n  const orderedGames = _.orderBy(games, [getStartAt], [\"asc\"]);\n\n  const getResultForPlayer = (game: GameDetails, playerIndex: number): \"winner\" | \"loser\" | \"unknown\" => {\n    const gameEnd = game.gameEnd;\n    if (gameEnd) {\n      // Handle LRAS\n      switch (gameEnd.gameEndMethod) {\n        case 7:\n          return gameEnd.lrasInitiatorIndex === playerIndex ? \"loser\" : \"winner\";\n      }\n    }\n\n    const latestFrame = game.latestFrame;\n    if (!latestFrame) {\n      return \"unknown\";\n    }\n    const winner = findWinner(latestFrame);\n    return winner === playerIndex ? \"winner\" : \"loser\";\n  };\n\n  const generatePlayerInfo = (game: GameDetails) => (player: PlayerType) => {\n    // console.log(player);\n    const characterName =\n      player.characterId !== null ? characterUtil.getCharacterName(player.characterId) : `Player ${player.port}`;\n    const characterColor =\n      player.characterId !== null && player.characterColor !== null\n        ? characterUtil.getCharacterColorName(player.characterId, player.characterColor)\n        : \"Default\";\n\n    return {\n      port: player.port,\n      characterId: player.characterId,\n      nametag: player.nametag,\n      characterName,\n      characterColor,\n      gameResult: getResultForPlayer(game, player.playerIndex),\n    };\n  };\n\n  return _.map(orderedGames, (game: GameDetails) => {\n    const playerInfoGen = generatePlayerInfo(game);\n\n    return {\n      stage: {\n        id: game.settings.stageId,\n        name: game.settings.stageId !== null ? stageUtil.getStageName(game.settings.stageId) : \"\",\n      },\n      players: _.map(game.settings.players, playerInfoGen),\n      startTime: game.metadata.startAt,\n      duration: convertFrameCountToDurationString(game.stats.lastFrame),\n    };\n  });\n}\n\nexport function generateOutput(statsList: string[], games: GameDetails[]) {\n  return {\n    games: generateGameInfo(games),\n    summary: computeStats(statsList, games),\n  };\n}\n","import { get } from \"lodash\";\n\nimport { getPortColor } from \"../portColor\";\nimport { generateOutput } from \"./compute\";\nimport { filterGames } from \"./filterGames\";\nimport { GameDetails } from \"./types\";\n\nconst extractNameAndCode = (playerPort: number, details: GameDetails) => {\n  const settings = details.settings;\n  const metadata = details.metadata;\n  const index = playerPort - 1;\n  const player = settings.players.find((player) => player.playerIndex === index);\n  const playerTag = player ? player.nametag : null;\n  const netplayName: string | null = get(metadata, [\"players\", index, \"names\", \"netplay\"], null);\n  const netplayCode: string | null = get(metadata, [\"players\", index, \"names\", \"code\"], null);\n  const name = playerTag || netplayName || \"\";\n  return [name, netplayCode || \"\"] as const;\n};\n\nexport function generateStatParams(gameDetails: GameDetails[], statsList: string[]): Record<string, any> {\n  const filtered = filterGames(gameDetails);\n  if (!filtered || filtered.length === 0) {\n    throw new Error(\"No valid games\");\n  }\n\n  let stats;\n  try {\n    stats = generateOutput(statsList, filtered);\n  } catch (err) {\n    console.error(err);\n    throw new Error(err);\n  }\n\n  const { games, summary } = stats;\n  console.log(\"generated stats: \", stats);\n  const params: Record<string, any> = {}; // \"mckm1\": , \"mckm2\", \"mcno1\", \"mcno2\", \"opk1\", \"opk2\", \"tdd1\", \"tdd2\", \"dpo1\", \"dpo2\", \"ipm1\", \"ipm2\", \"akp1\", \"akp2\", \"nw1\", \"nw2\"};\n\n  // Set character info\n  const lastGame = games[games.length - 1];\n  const leftPlayer = lastGame.players[0];\n  const rightPlayer = lastGame.players[1];\n  params.leftColor = getPortColor(leftPlayer.port);\n  params.rightColor = getPortColor(rightPlayer.port);\n\n  params.char1 = leftPlayer.characterId;\n  params.char2 = rightPlayer.characterId;\n  params.color1 = leftPlayer.characterColor;\n  params.color2 = rightPlayer.characterColor;\n\n  // Set name tags\n  const lastGameDetails = filtered[filtered.length - 1];\n  const [leftTag, leftCode] = extractNameAndCode(leftPlayer.port, lastGameDetails);\n  const [rightTag, rightCode] = extractNameAndCode(rightPlayer.port, lastGameDetails);\n  params.name1 = leftTag.toUpperCase() || leftPlayer.characterName;\n  params.name2 = rightTag.toUpperCase() || rightPlayer.characterName;\n  params.sub1 = leftCode;\n  params.sub2 = rightCode;\n\n  // Set game info\n  params.gt = games.length; // Set the total number of games\n\n  games.forEach((game, i) => {\n    // console.log(\"processing game: \", game);\n    const gameKey = `g${i + 1}`;\n    const stageId = game.stage.id as number;\n    const gameDuration: string = game.duration;\n    const playerInfo = game.players.map((p: any) => [p.characterId, p.characterColor, p.gameResult].join(\",\"));\n    const gameValue = [stageId, gameDuration, ...playerInfo].join(\",\");\n    // console.log(`${gameKey} : ${gameValue}`);\n    params[gameKey] = gameValue;\n  });\n\n  params.stats = statsList.join(\",\");\n  // Set the stat values\n  summary.forEach((s) => {\n    // Stats can be null if the id is invalid or not specified\n    if (!s) {\n      return;\n    }\n\n    switch (s.id) {\n      // Put any custom logic here\n      default: {\n        (s.results as any[]).forEach((result, i) => {\n          params[`${s.id}${i + 1}`] = result.simple.text;\n        });\n        break;\n      }\n    }\n  });\n\n  console.log(\"returning these params: \", params);\n  return params;\n}\n","/* eslint-disable */\n\n/*\n * Taken from: https://github.com/project-slippi/slippi-set-stats/blob/master/main.js\n */\n\nimport _ from \"lodash\";\n\nexport function filterGames(games) {\n  // console.log(games);\n  const gamesByIsSingles = _.groupBy(games, (game) => {\n    const numberOfPlayers = game.settings.players.length;\n    return numberOfPlayers === 2;\n  });\n\n  const nonSinglesGames = _.get(gamesByIsSingles, false) || [];\n  if (_.some(nonSinglesGames)) {\n    console.log(\"The following games have been excluded because they are not singles games:\");\n    _.forEach(nonSinglesGames, (game) => {\n      console.log(game.filePath);\n    });\n    console.log();\n  }\n\n  const singlesGames = _.get(gamesByIsSingles, true) || [];\n  const gamesByPorts = _.chain(singlesGames)\n    .groupBy((game) => {\n      const ports = _.map(game.settings.players, \"port\");\n      return _.join(ports, \"-\");\n    })\n    .orderBy([\"length\"], [\"desc\"])\n    .value();\n\n  const gamesWithSamePorts = gamesByPorts.shift();\n  if (_.some(gamesByPorts)) {\n    console.log(\"The following games have been excluded because the player ports differ:\");\n    const flatGames = _.flatten(gamesByPorts);\n    _.forEach(flatGames, (game) => {\n      console.log(game.filePath);\n    });\n    console.log();\n  }\n\n  if (_.isEmpty(gamesWithSamePorts)) {\n    throw new Error(\"There were no valid games found to compute stats from.\");\n  }\n\n  console.log(`Including ${gamesWithSamePorts.length} games for stat calculation...`);\n\n  return gamesWithSamePorts;\n}\n","import { SlippiGame } from \"@slippi/slippi-js\";\n\nimport { GameDetails } from \"./stats/types\";\n\nexport async function readFileAsGameDetails(file: File): Promise<GameDetails> {\n  const game = await readFileAsSlippiGame(file);\n  return generateGameDetails(file.name, game);\n}\n\nasync function readFileAsSlippiGame(file: File): Promise<SlippiGame> {\n  const data = (await readFileAsArrayBuffer(file)) as ArrayBuffer;\n  const arr = new Int8Array(data);\n  const buf = Buffer.from(arr);\n  return new SlippiGame(buf);\n}\n\nfunction generateGameDetails(name: string, game: SlippiGame): GameDetails {\n  // For a valid SLP game, at the very least we should have valid settings\n  const settings = game.getSettings();\n  if (!settings) {\n    throw new Error(`Invalid SLP file. Could not find game settings in file: ${name}`);\n  }\n\n  return {\n    filePath: name,\n    settings,\n    frames: game.getFrames(),\n    stats: game.getStats(),\n    metadata: game.getMetadata(),\n    latestFrame: game.getLatestFrame(),\n    gameEnd: game.getGameEnd(),\n  };\n}\n\nasync function readFileAsArrayBuffer(file: File): Promise<string | ArrayBufferLike> {\n  return new Promise((resolve, reject) => {\n    const fr = new FileReader();\n    fr.onabort = () => reject(\"file reading was aborted\");\n    fr.onerror = () => reject(\"file reading has failed\");\n    if (fr.readAsBinaryString) {\n      fr.addEventListener(\n        \"load\",\n        function () {\n          const string = (this as any).resultString != null ? (this as any).resultString : this.result;\n          const result = new Uint8Array(string.length);\n          for (let i = 0; i < string.length; i++) {\n            result[i] = string.charCodeAt(i);\n          }\n          resolve(result.buffer);\n        },\n        false\n      );\n      fr.readAsBinaryString(file);\n    } else {\n      fr.addEventListener(\n        \"load\",\n        function () {\n          if (this.result) {\n            resolve(this.result);\n          } else {\n            reject(\"no data read\");\n          }\n        },\n        false\n      );\n      fr.readAsArrayBuffer(file);\n    }\n  });\n}\n","/** @jsx jsx */\nimport { css, jsx } from \"@emotion/core\";\nimport { PrimaryButton, SecondaryButton } from \"components/Buttons\";\nimport React from \"react\";\n\nimport { StatOptionList } from \"./StatOptionList\";\nimport { StatOption } from \"./types\";\n\nexport * from \"./types\";\n\ninterface StatOptionsProps {\n  onClose: () => void;\n  value: StatOption[];\n  onChange: (stats: StatOption[]) => void;\n  onReset: () => void;\n  hideReset?: boolean;\n}\n\nexport const StatOptions: React.FC<StatOptionsProps> = (props) => {\n  return (\n    <div\n      css={css`\n        display: flex;\n        flex-direction: column;\n        flex-wrap: nowrap;\n        height: 100%;\n        width: 100%;\n      `}\n    >\n      <SecondaryButton align=\"right\" onClick={props.onClose}>\n        close\n      </SecondaryButton>\n      <div\n        css={css`\n          overflow: auto;\n          display: flex;\n          flex-direction: column;\n          margin-bottom: 2rem;\n        `}\n      >\n        <StatOptionList value={props.value} onChange={props.onChange} />\n      </div>\n      <PrimaryButton backgroundColor=\"white\" color=\"black\" onClick={props.onClose}>\n        CLOSE\n      </PrimaryButton>\n      {!props.hideReset && <SecondaryButton onClick={props.onReset}>restore defaults</SecondaryButton>}\n    </div>\n  );\n};\n","module.exports = __webpack_public_path__ + \"static/media/powered-by.61867ea8.png\";","import styled from \"@emotion/styled\";\nimport React from \"react\";\n\nconst Outer = styled.div<{\n  checked?: boolean;\n  isDragging?: boolean;\n}>`\n  opacity: ${(p) => (p.checked ? \"1\" : \"0.5\")};\n  background-color: ${(p) => (p.isDragging ? \"rgba(0, 0, 0, 0.6)\" : \"rgba(0, 0, 0, 0.3)\")};\n  color: white;\n  padding: 0.5rem;\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 0.5rem;\n  font-weight: ${(p) => (p.checked ? \"600\" : \"100\")};\n  ${(p) =>\n    p.isDragging\n      ? `\n    box-shadow: 0 10px 20px rgba(0,0,0,0.19), 0 6px 6px rgba(0,0,0,0.23);\n    opacity: 1;\n`\n      : \"\"}\n\n  .title {\n    cursor: pointer;\n    user-select: none;\n    & > input[type=\"checkbox\"] {\n      margin-right: 1rem;\n    }\n  }\n  .handle {\n    display: flex;\n  }\n`;\n\nexport interface OptionProps extends Record<string, any> {\n  name: string;\n  checked?: boolean;\n  draggable?: boolean;\n  onChange: (checked: boolean) => void;\n  handleProps?: Record<string, any>;\n}\n\nexport const Option: React.FC<OptionProps> = (props) => {\n  const { name, checked, draggable, onChange, handleProps, children, ...rest } = props;\n  const toggle = () => props.onChange(!props.checked);\n  return (\n    <Outer checked={props.checked} {...rest}>\n      <label className=\"title\">\n        <input type=\"checkbox\" checked={props.checked} onChange={toggle} />\n        {name}\n      </label>\n      {draggable && (\n        <div className=\"handle\" {...handleProps}>\n          <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n            <path d=\"M20 9H4v2h16V9zM4 15h16v-2H4v2z\" fill=\"#ffffff\" />\n          </svg>\n        </div>\n      )}\n    </Outer>\n  );\n};\n","import { STAT_DEFINITIONS } from \"lib/stats\";\nimport React from \"react\";\nimport { Draggable } from \"react-beautiful-dnd\";\n\nimport { Option } from \"./Option\";\n\nexport const StatOptionItem: React.FC<{\n  checked: boolean;\n  index: number;\n  id: string;\n  onChange: (checked: boolean) => void;\n}> = (props) => {\n  const stat = STAT_DEFINITIONS.get(props.id);\n  if (!stat) {\n    return null;\n  }\n  return (\n    <Draggable draggableId={props.id} index={props.index}>\n      {(provided, snapshot) => (\n        <div ref={provided.innerRef}>\n          <Option\n            {...provided.draggableProps}\n            isDragging={snapshot.isDragging}\n            checked={props.checked}\n            onChange={props.onChange}\n            draggable={true}\n            name={stat.name}\n            handleProps={provided.dragHandleProps}\n          />\n        </div>\n      )}\n    </Draggable>\n  );\n};\n","import { reorder } from \"lib/util\";\nimport React from \"react\";\nimport { DragDropContext, Droppable } from \"react-beautiful-dnd\";\n\nimport { StatOptionItem } from \"./StatOptionItem\";\nimport { StatOption } from \"./types\";\n\ninterface StatOptionListProps {\n  value: StatOption[];\n  onChange: (options: StatOption[]) => void;\n}\n\nexport const StatOptionList: React.FC<StatOptionListProps> = (props) => {\n  const statOptions = props.value;\n  const onDragEnd = (result: any) => {\n    const { destination, source } = result;\n    if (!destination) {\n      return;\n    }\n    if (destination.droppableId === source.droppableId && destination.index === source.index) {\n      return;\n    }\n    const newArray = reorder(props.value, source.index, destination.index);\n    props.onChange(newArray);\n  };\n\n  const toggle = (statId: string) => {\n    const optionIndex = statOptions.findIndex((o) => o.statId === statId);\n    if (optionIndex === -1) {\n      return;\n    }\n    const newOptions = Array.from(statOptions);\n    const option = newOptions[optionIndex];\n    option.enabled = !option.enabled;\n    props.onChange(newOptions);\n  };\n  return (\n    <DragDropContext onDragEnd={onDragEnd}>\n      <Droppable droppableId=\"stat-option-list\">\n        {(provided) => (\n          <div ref={provided.innerRef} {...provided.droppableProps}>\n            {statOptions.map((option, i) => {\n              return (\n                <StatOptionItem\n                  key={option.statId}\n                  index={i}\n                  id={option.statId}\n                  checked={option.enabled}\n                  onChange={() => toggle(option.statId)}\n                />\n              );\n            })}\n            {provided.placeholder}\n          </div>\n        )}\n      </Droppable>\n    </DragDropContext>\n  );\n};\n","import { css } from \"@emotion/core\";\n\nexport const hasOpacity = (initial: number, final = 1, transition = \"opacity 0.2s ease-in-out\") => css`\n  opacity: ${initial};\n  transition: ${transition};\n  &:hover {\n    opacity: ${final};\n  }\n`;\n","import moment from \"moment\";\n\nexport function convertFrameCountToDurationString(frameCount: number): string {\n  // Enforce positive numbers only\n  const totalFrames = Math.max(frameCount, 0);\n  const duration = moment.duration(totalFrames / 60, \"seconds\");\n  return moment.utc(duration.as(\"milliseconds\")).format(\"m:ss\");\n}\n\nexport function reorder(list: any[], startIndex: number, endIndex: number) {\n  const result = Array.from(list);\n  const [removed] = result.splice(startIndex, 1);\n  result.splice(endIndex, 0, removed);\n\n  return result;\n}\n","export enum PortColor {\n  P1 = \"#f52e2e\",\n  P2 = \"#5463ff\",\n  P3 = \"#ffc717\",\n  P4 = \"#1f9e40\",\n}\n\nexport function getPortColor(portNumber: number): string {\n  switch (portNumber) {\n    case 1:\n      return PortColor.P1;\n    case 2:\n      return PortColor.P2;\n    case 3:\n      return PortColor.P3;\n    case 4:\n      return PortColor.P4;\n    default:\n      return PortColor.P1;\n  }\n}\n","import { characters as characterUtil, moves as moveUtil, Stage } from \"@slippi/slippi-js\";\nimport { sampleSize } from \"lodash\";\n\nimport { Stat, STAT_DEFINITIONS } from \"./stats\";\nimport { convertFrameCountToDurationString } from \"./util\";\n\nconst LEGAL_STAGE_IDS = [\n  Stage.FOUNTAIN_OF_DREAMS,\n  Stage.POKEMON_STADIUM,\n  Stage.YOSHIS_STORY,\n  Stage.DREAMLAND,\n  Stage.BATTLEFIELD,\n  Stage.FINAL_DESTINATION,\n];\n\n/*\n * Random functions are taken from: https://stackoverflow.com/questions/1527803/generating-random-whole-numbers-in-javascript-in-a-specific-range\n */\n\n/**\n * Returns a random number between min (inclusive) and max (exclusive)\n */\nfunction getRandomArbitrary(min: number, max: number) {\n  return Math.random() * (max - min) + min;\n}\n\n/**\n * Returns a random integer between min (inclusive) and max (inclusive).\n * The value is no lower than min (or the next integer greater than min\n * if min isn't an integer) and no greater than max (or the next integer\n * lower than max if max isn't an integer).\n * Using Math.round() will give you a non-uniform distribution!\n */\nfunction getRandomInt(min: number, max: number) {\n  min = Math.ceil(min);\n  max = Math.floor(max);\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n}\n\nexport function generateDemoValues(): Record<string, any> {\n  const paramMap: Record<string, any> = {};\n\n  // Set names\n  paramMap.name1 = \"FOLLOW\";\n  paramMap.name2 = \"ON\";\n  paramMap.sub1 = \"@_vinceau\";\n  paramMap.sub2 = \"TWITTER\";\n\n  // Set colors\n  const [char1, color1] = generateRandomCharacter();\n  const [char2, color2] = generateRandomCharacter();\n  paramMap.char1 = char1;\n  paramMap.color1 = color1;\n  paramMap.char2 = char2;\n  paramMap.color2 = color2;\n\n  // Random games\n  const totalGames = getRandomInt(3, 5);\n  paramMap.gt = totalGames;\n  sampleSize(LEGAL_STAGE_IDS, totalGames).forEach((stage, i) => {\n    const gameKey = `g${i + 1}`;\n    const leftWillWin = Math.random() < 0.5;\n    const leftPlayerInfo = [char1, color1, leftWillWin ? \"winner\" : \"loser\"].join(\",\");\n    const rightPlayerInfo = [char2, color2, leftWillWin ? \"loser\" : \"winner\"].join(\",\");\n    const gameValue = generateRandomGame([leftPlayerInfo, rightPlayerInfo], stage);\n    paramMap[gameKey] = gameValue;\n  });\n\n  const demoStats = [\n    Stat.KILL_MOVES,\n    Stat.NEUTRAL_OPENER_MOVES,\n    \"\",\n    Stat.OPENINGS_PER_KILL,\n    Stat.DAMAGE_DONE,\n    Stat.AVG_KILL_PERCENT,\n    Stat.NEUTRAL_WINS,\n  ];\n\n  paramMap.stats = demoStats.join(\",\");\n\n  demoStats\n    .filter((s) => Boolean(s))\n    .forEach((statId) => {\n      [1, 2].forEach((player) => {\n        const key = statId + player;\n        paramMap[key] = generateRandomStat(statId);\n      });\n    });\n  return paramMap;\n}\n\nfunction generateRandomStat(statId: string): string {\n  const stat = STAT_DEFINITIONS.get(statId);\n  if (!stat) {\n    return \"\";\n  }\n  switch (statId) {\n    case Stat.NEUTRAL_OPENER_MOVES:\n      return generateRandomMove();\n    case Stat.KILL_MOVES:\n      return generateRandomMove();\n    case Stat.OPENINGS_PER_KILL:\n      return getRandomArbitrary(5, 15).toFixed(stat.recommendedRounding);\n    case Stat.DAMAGE_DONE:\n      return getRandomArbitrary(1000, 2000).toFixed(stat.recommendedRounding);\n    case Stat.AVG_KILL_PERCENT:\n      return getRandomArbitrary(50, 200).toFixed(stat.recommendedRounding);\n    case Stat.NEUTRAL_WINS:\n      return getRandomInt(30, 80).toString();\n    default:\n      return \"\";\n  }\n}\n\nfunction generateRandomMove(): string {\n  const move = getRandomInt(7, 21);\n  const name = moveUtil.getMoveShortName(move).toUpperCase();\n  return `${name} - ${move}`;\n}\n\nfunction generateRandomCharacter() {\n  const charId = getRandomInt(0, 25);\n  const charInfo = characterUtil.getCharacterInfo(charId);\n  const colorIndex = getRandomInt(0, charInfo.colors.length - 1);\n  const color = charInfo.colors[colorIndex];\n  return [charId, color] as const;\n}\n\nfunction generateRandomStageId(): number {\n  const stageIndex = getRandomInt(0, LEGAL_STAGE_IDS.length - 1);\n  return LEGAL_STAGE_IDS[stageIndex];\n}\n\nfunction generateRandomDuration(): string {\n  // The number of frames in 30 seconds\n  const minFrames = 30 * 60;\n  // The number of frames in 8 minutes\n  const maxFrames = 8 * 60 * 60;\n  const frames = getRandomInt(minFrames, maxFrames);\n  return convertFrameCountToDurationString(frames);\n}\n\nfunction generateRandomGame(playerInfos: string[], stage?: Stage): string {\n  const stageId = stage !== undefined ? stage : generateRandomStageId();\n  const gameDuration = generateRandomDuration();\n  const gameValue = [stageId, gameDuration, ...playerInfos].join(\",\");\n  return gameValue;\n}\n","/** @jsx jsx */\nimport { css, Global, jsx } from \"@emotion/core\";\n\nexport interface Theme {\n  primaryColor: string;\n  secondaryColor: string;\n}\n\nexport const defaultTheme: Theme = {\n  primaryColor: \"#286163\",\n  secondaryColor: \"#121020\",\n};\n\nexport const GlobalTheme: React.FC<Theme> = ({ primaryColor, secondaryColor }) => {\n  return (\n    <Global\n      styles={css`\n        body.themed {\n          background: radial-gradient(circle at center -30%, ${primaryColor}, ${secondaryColor});\n        }\n      `}\n    />\n  );\n};\n","import { defaultTheme } from \"styles/theme\";\n\nfunction getStoredValues(keys: string[]): Record<string, string | null> {\n  const res: Record<string, string | null> = {};\n  keys.forEach((key) => {\n    const value = localStorage.getItem(key);\n    if (value) {\n      res[key] = value;\n    }\n  });\n  return res;\n}\n\nexport function generateSearchParams(params: Record<string, any>): URLSearchParams {\n  const restoredParams = getStoredValues([\"primaryColor\", \"secondaryColor\", \"leftColor\", \"rightColor\"]);\n  const searchParams = new URLSearchParams({\n    ...defaultTheme,\n    ...restoredParams,\n    ...params,\n  });\n  return searchParams;\n}\n","import { generateDemoValues } from \"lib/demo\";\nimport { generateSearchParams } from \"lib/searchParams\";\nimport React from \"react\";\nimport { Redirect } from \"react-router-dom\";\n\nexport const RandomView: React.FC = () => {\n  const params = generateDemoValues();\n  const search = \"?\" + generateSearchParams(params).toString();\n  return (\n    <Redirect\n      to={{\n        pathname: \"/render\",\n        search,\n      }}\n    />\n  );\n};\n","import { GameDetails } from \"lib/stats/types\";\n\nimport { InitialStateType, ProcessedFile } from \"./types\";\n\ntype ActionMap<M extends { [index: string]: any }> = {\n  [Key in keyof M]: M[Key] extends undefined\n    ? {\n        type: Key;\n      }\n    : {\n        type: Key;\n        payload: M[Key];\n      };\n};\n\nexport enum Types {\n  ADD_FILES = \"ADD_FILES\",\n  SET_DETAILS = \"SET_DETAILS\",\n  SET_ERROR = \"SET_ERROR\",\n  REMOVE_FILE = \"REMOVE_FILE\",\n  CLEAR_ALL = \"CLEAR_ALL\",\n}\n\ntype ActionPayload = {\n  [Types.SET_DETAILS]: {\n    filename: string;\n    details: GameDetails;\n  };\n  [Types.SET_ERROR]: {\n    filename: string;\n    error: any;\n  };\n  [Types.ADD_FILES]: {\n    files: File[];\n  };\n  [Types.REMOVE_FILE]: {\n    filename: string;\n  };\n  [Types.CLEAR_ALL]: never;\n};\n\nexport type ReducerActions = ActionMap<ActionPayload>[keyof ActionMap<ActionPayload>];\n\nexport const reducer = (state: InitialStateType, action: ReducerActions) => {\n  switch (action.type) {\n    case Types.SET_DETAILS: {\n      const { filename, details } = action.payload;\n      const files = state.files;\n      const fileToReplace = files.findIndex((f) => f.filename === filename);\n      if (fileToReplace !== -1) {\n        files[fileToReplace].details = details;\n        files[fileToReplace].loading = false;\n      }\n      return {\n        ...state,\n        files,\n      };\n    }\n    case Types.SET_ERROR: {\n      const { filename, error } = action.payload;\n      const files = state.files;\n      const fileToReplace = files.findIndex((f) => f.filename === filename);\n      if (fileToReplace !== -1) {\n        files[fileToReplace].error = error;\n        files[fileToReplace].loading = false;\n      }\n      return {\n        ...state,\n        files,\n      };\n    }\n    case Types.ADD_FILES: {\n      const { files } = action.payload;\n      const currentFiles = state.files;\n      let newFiles: ProcessedFile[] = files.map((f) => ({\n        filename: f.name,\n        loading: true,\n        details: null,\n      }));\n\n      // Make sure there are no duplicate filenames\n      newFiles = newFiles.filter((f) => !currentFiles.find((existingFile) => f.filename === existingFile.filename));\n\n      return {\n        ...state,\n        files: [...currentFiles, ...newFiles],\n      };\n    }\n    case Types.REMOVE_FILE: {\n      const { filename } = action.payload;\n      const files = state.files.filter((f) => f.filename !== filename);\n      return {\n        ...state,\n        files,\n      };\n    }\n    case Types.CLEAR_ALL: {\n      return {\n        ...state,\n        files: [],\n      };\n    }\n    default:\n      return state;\n  }\n};\n","import React, { createContext, Dispatch, useReducer } from \"react\";\n\nimport { reducer, ReducerActions } from \"./reducers\";\nimport { InitialStateType } from \"./types\";\n\nconst initialState: InitialStateType = {\n  files: [],\n};\n\nconst AppContext = createContext<{\n  state: InitialStateType;\n  dispatch: Dispatch<ReducerActions>;\n}>({\n  state: initialState,\n  dispatch: () => null,\n});\n\nconst mainReducer = (state: InitialStateType, action: ReducerActions) => reducer(state, action);\n\nconst AppProvider: React.FC = ({ children }) => {\n  const [state, dispatch] = useReducer(mainReducer, initialState);\n\n  return <AppContext.Provider value={{ state, dispatch }}>{children}</AppContext.Provider>;\n};\n\nexport { AppProvider, AppContext };\n","import React from \"react\";\n\nexport const ExternalLink: React.FC<React.HTMLProps<HTMLAnchorElement>> = (props) => {\n  return (\n    <a target=\"_blank\" rel=\"noopener noreferrer\" {...props}>\n      {props.children}\n    </a>\n  );\n};\n","import styled from \"@emotion/styled\";\n\nexport const Header = styled.h1`\n  text-transform: uppercase;\n  font-weight: 800;\n  font-size: 5.5rem;\n  margin: 2rem;\n  padding-bottom: 1rem;\n  position: relative;\n  text-align: center;\n\n  &::before {\n    z-index: -1;\n    content: \"\";\n    display: block;\n    background-image: linear-gradient(to right, transparent, rgba(255, 255, 255, 0.2), transparent);\n    height: 0.1rem;\n    position: absolute;\n    width: 80%;\n    margin-left: 50%;\n    transform: translateX(-50%);\n    bottom: 0;\n  }\n`;\n","import styled from \"@emotion/styled\";\nimport React from \"react\";\nimport { DropzoneOptions, useDropzone } from \"react-dropzone\";\n\nconst getColor = (props: any) => {\n  if (props.isDragAccept) {\n    return \"#00e676\";\n  }\n  if (props.isDragActive) {\n    return \"#2196f3\";\n  }\n  return \"#eeeeee\";\n};\n\nconst Container = styled.div`\n  cursor: pointer;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 20px;\n  border-width: 2px;\n  border-color: ${(props) => getColor(props)};\n  border-style: dashed;\n  background-color: rgba(0, 0, 0, 0.3);\n  color: white;\n  outline: none;\n  transition: border 0.24s ease-in-out;\n  p {\n    text-align: center;\n    text-transform: uppercase;\n    font-weight: bold;\n  }\n`;\n\nexport const DropPad: React.FC<Partial<DropzoneOptions>> = (props) => {\n  const { getRootProps, getInputProps, isDragActive, isDragAccept, isDragReject } = useDropzone(props);\n\n  return (\n    <Container {...getRootProps({ isDragActive, isDragAccept, isDragReject })}>\n      <input {...getInputProps()} />\n      <p>Drag SLP files here or click to select</p>\n    </Container>\n  );\n};\n","/** @jsx jsx */\nimport { css, jsx } from \"@emotion/core\";\nimport React from \"react\";\n\nexport const ErrorMessage: React.FC = (props) => {\n  return (\n    <span\n      css={css`\n        color: #bf2600;\n        font-weight: bold;\n      `}\n    >\n      ERROR: {props.children}\n    </span>\n  );\n};\n","import { characters as characterUtil, stages as stageUtil } from \"@slippi/slippi-js\";\n\nexport type Side = \"left\" | \"right\";\n\nfunction sanitize(text: string, replacement = \"-\"): string {\n  return text.toLowerCase().replace(/[. &]+/gi, replacement);\n}\n\nfunction getCharacterFolderFromId(characterId: string | number, color?: string) {\n  const characterName = characterUtil.getCharacterName(+characterId);\n  return getCharacterFolderFromName(characterName, color);\n}\n\nfunction getCharacterFolderFromName(character: string, color = \"Default\") {\n  const charFolder = sanitize(character);\n  const colorFolder = sanitize(color);\n  return `${process.env.PUBLIC_URL}/images/characters/${charFolder}/${colorFolder}`;\n}\n\nexport function getCharacterPortrait(characterId: string | number, color?: string): string {\n  const folder = getCharacterFolderFromId(characterId, color);\n  return `${folder}/portrait.png`;\n}\n\nexport function getCharacterVSScreen(side: Side, characterId: string | number, color?: string): string {\n  const folder = getCharacterFolderFromId(characterId, color);\n  return `${folder}/vs-${side}.png`;\n}\n\nexport function getCharacterStockIcon(characterId: string | number, color?: string): string {\n  const folder = getCharacterFolderFromId(characterId, color);\n  return `${folder}/stock.png`;\n}\n\nexport function getStageIcon(stageId: string | number): string {\n  const stageName = stageUtil.getStageName(+stageId);\n  return `${process.env.PUBLIC_URL}/images/stages/${stageName}.png`;\n}\n","/** @jsx jsx */\nimport { css, jsx } from \"@emotion/core\";\nimport { characters as characterUtil, stages as stageUtil } from \"@slippi/slippi-js\";\nimport { ErrorMessage } from \"components/ErrorMessage\";\nimport { getCharacterStockIcon } from \"lib/resources\";\nimport { convertFrameCountToDurationString } from \"lib/util\";\nimport { findWinner } from \"lib/winner\";\nimport React from \"react\";\nimport { ProcessedFile } from \"store/types\";\nimport { hasOpacity } from \"styles/opacity\";\nimport { defaultTheme } from \"styles/theme\";\n\nconst BasicFileItem: React.FC<{ name: string; onRemove?: () => void }> = (props) => {\n  const { onRemove, name, children } = props;\n  return (\n    <div\n      css={css`\n        padding: 1.5rem 2rem;\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        color: rgba(255, 255, 255, 0.8);\n        background-color: rgba(0, 0, 0, 0.3);\n        ${hasOpacity(0.8)};\n        &:hover {\n          .remove-button {\n            opacity: 1;\n          }\n        }\n        .remove-button {\n          opacity: 0;\n          transition: opacity 0.2s ease-in-out;\n          background: white;\n          color: ${defaultTheme.secondaryColor};\n          border: none;\n          font-weight: bold;\n          font-size: 2.5rem;\n          cursor: pointer;\n          padding: 0.2rem 1rem;\n          margin: 0;\n        }\n      `}\n    >\n      <div\n        css={css`\n          flex: 1;\n        `}\n      >\n        <div\n          css={css`\n            font-size: 1.6rem;\n            font-weight: bold;\n            margin-bottom: 1rem;\n            font-family: monospace;\n          `}\n        >\n          {name}\n        </div>\n        <div>{children}</div>\n      </div>\n      {onRemove && (\n        <button className=\"remove-button\" onClick={onRemove} title=\"Remove\">\n          ✕\n        </button>\n      )}\n    </div>\n  );\n};\n\nconst CharacterIcon: React.FC<{\n  charId: string | number;\n  color: string;\n  winner?: boolean;\n}> = ({ charId, color, winner }) => {\n  const src = getCharacterStockIcon(charId, color);\n  return (\n    <div\n      css={css`\n        position: relative;\n        display: inline-block;\n        margin-top: 0.5rem;\n        ${winner &&\n        `&::after {\n          position: absolute;\n          content: \" \";\n          height: 0.7rem;\n          width: 60%;\n          background-color: #ffa700;\n          left: 20%;\n          bottom: 110%;\n          clip-path: polygon(50% 0%, 75% 35%, 100% 0, 100% 100%, 0 100%, 0 0, 25% 35%);\n        }\n      `}\n      `}\n    >\n      <img src={src} style={{ height: \"3rem\" }} alt=\"stock icon\" />\n    </div>\n  );\n};\n\nexport interface FileItemProps {\n  file: ProcessedFile;\n  onRemove: () => void;\n}\n\nexport const FileItem: React.FC<FileItemProps> = (props) => {\n  const { file, onRemove } = props;\n  const { filename, loading, error, details } = file;\n  if (loading) {\n    return (\n      <BasicFileItem name={filename}>\n        <span\n          css={css`\n            font-weight: bold;\n          `}\n        >\n          LOADING...\n        </span>\n      </BasicFileItem>\n    );\n  }\n  if (error || !details) {\n    return (\n      <BasicFileItem onRemove={onRemove} name={filename}>\n        <ErrorMessage>{error.message}</ErrorMessage>\n      </BasicFileItem>\n    );\n  }\n\n  const stageName = stageUtil.getStageName(details.settings.stageId as number);\n  const players = details.settings.players;\n  const duration = details.latestFrame ? convertFrameCountToDurationString(details.latestFrame.frame) : \"N/A\";\n  const winnerIndex = details.latestFrame ? findWinner(details.latestFrame) : null;\n  const icons = players.map((player) => {\n    const winner = player.playerIndex === winnerIndex;\n    const charId = player.characterId as number;\n    const color = characterUtil.getCharacterColorName(charId, player.characterColor as number);\n    return <CharacterIcon key={`${player.port}-icon`} charId={charId} color={color} winner={winner} />;\n  });\n  return (\n    <BasicFileItem onRemove={onRemove} name={filename}>\n      <div\n        css={css`\n          display: grid;\n          justify-items: center;\n          align-items: center;\n          grid-template-columns: repeat(3, 1fr);\n          font-weight: bold;\n        `}\n      >\n        <div>{stageName}</div>\n        <div\n          css={css`\n            display: grid;\n            grid-auto-flow: column;\n            grid-column-gap: 1rem;\n          `}\n        >\n          {icons}\n        </div>\n        <div>{duration}</div>\n      </div>\n    </BasicFileItem>\n  );\n};\n","/** @jsx jsx */\nimport { css, jsx } from \"@emotion/core\";\nimport React from \"react\";\nimport { ProcessedFile } from \"store/types\";\n\nimport { FileItem } from \"./FileItem\";\n\nexport interface FileListProps {\n  files: ProcessedFile[];\n  onRemove: (filename: string) => void;\n}\n\nexport const FileList: React.FC<FileListProps> = (props) => {\n  const { files, onRemove } = props;\n  return (\n    <div\n      css={css`\n        display: grid;\n        grid-template-columns: 100%;\n        grid-row-gap: 1rem;\n      `}\n    >\n      {files.map((f) => (\n        <FileItem key={f.filename} file={f} onRemove={() => onRemove(f.filename)} />\n      ))}\n    </div>\n  );\n};\n","/** @jsx jsx */\nimport { css, jsx } from \"@emotion/core\";\nimport { PrimaryButton, SecondaryButton } from \"components/Buttons\";\nimport { DropPad } from \"components/DropPad\";\nimport { ErrorMessage } from \"components/ErrorMessage\";\nimport { FileList } from \"components/FileList\";\nimport { readFileAsGameDetails } from \"lib/readFile\";\nimport { generateSearchParams } from \"lib/searchParams\";\nimport { generateStatParams } from \"lib/stats\";\nimport { GameDetails, Stat } from \"lib/stats/types\";\nimport React, { useCallback, useContext } from \"react\";\nimport { useHistory } from \"react-router-dom\";\n\nimport { AppContext, Types } from \"../store\";\nimport { StatOption, StatOptions } from \"./StatOptions\";\n\nconst STAT_OPTIONS_STORE_KEY = \"statOptions\";\n\nconst ALL_STATS: string[] = [\n  Stat.INPUTS_PER_MINUTE,\n  Stat.DAMAGE_PER_OPENING,\n  Stat.OPENINGS_PER_KILL,\n  Stat.DAMAGE_DONE,\n  Stat.AVG_KILL_PERCENT,\n  Stat.NEUTRAL_WINS,\n  Stat.L_CANCEL,\n  Stat.FIRST_BLOOD,\n  Stat.EARLY_KILLS,\n  Stat.LATE_DEATHS,\n  Stat.SELF_DESTRUCTS,\n  Stat.HIGH_DAMAGE_PUNISHES,\n];\n\nconst DEFAULT_STATS = [Stat.OPENINGS_PER_KILL, Stat.DAMAGE_DONE, Stat.AVG_KILL_PERCENT, Stat.NEUTRAL_WINS];\n\nconst getDefaultStats = (): StatOption[] => {\n  const current = DEFAULT_STATS.map((s) => ({\n    statId: s,\n    enabled: true,\n  }));\n  return validateStatOptions(current);\n};\n\nconst validateStatOptions = (current: StatOption[]): StatOption[] => {\n  const newItems: StatOption[] = ALL_STATS.filter(\n    (statId) => !current.find((option) => option.statId === statId)\n  ).map((statId) => ({ statId, enabled: false }));\n\n  // Make sure the ones we're showing are supported\n  const currentItems = current.filter((c) => ALL_STATS.includes(c.statId));\n  return [...currentItems, ...newItems];\n};\n\nconst generateStatsList = (options: StatOption[]): string[] => {\n  const statsList = options.filter((s) => s.enabled).map((s) => s.statId);\n  return [Stat.KILL_MOVES, Stat.NEUTRAL_OPENER_MOVES, \"\", ...statsList];\n};\n\nexport const FileListInput: React.FC<{ buttonColor: string }> = ({ buttonColor }) => {\n  const history = useHistory();\n  const { state, dispatch } = useContext(AppContext);\n  const [error, setError] = React.useState<any>(null);\n  const [showOptions, setShowOptions] = React.useState(false);\n\n  const clearAll = () => {\n    dispatch({\n      type: Types.CLEAR_ALL,\n    });\n  };\n\n  let defaultStats = getDefaultStats();\n  let statsModified = false;\n  // Since we're persisting user options in localStorage, we need to be able to\n  // handle the case where new options are available, yet not in their localStorage.\n  const restoredStatsString = localStorage.getItem(STAT_OPTIONS_STORE_KEY);\n  if (restoredStatsString) {\n    statsModified = restoredStatsString !== JSON.stringify(defaultStats);\n    defaultStats = validateStatOptions(JSON.parse(restoredStatsString));\n  }\n\n  const [statOptions, setStatOptions] = React.useState<StatOption[]>(defaultStats);\n\n  const onStatOptionReset = () => {\n    onStatOptionChange(getDefaultStats());\n  };\n\n  const onStatOptionChange = (options: StatOption[]) => {\n    localStorage.setItem(STAT_OPTIONS_STORE_KEY, JSON.stringify(options));\n    setStatOptions(options);\n  };\n\n  const onClick = () => {\n    try {\n      const gameDetails = state.files.filter((f) => f.details !== null).map((f) => f.details as GameDetails);\n      const params = generateStatParams(gameDetails, generateStatsList(statOptions));\n      const search = \"?\" + generateSearchParams(params).toString();\n      history.push({\n        pathname: \"/render\",\n        search,\n      });\n    } catch (err) {\n      console.error(error);\n      setError(err);\n    }\n  };\n\n  const onRemove = (filename: string) => {\n    dispatch({\n      type: Types.REMOVE_FILE,\n      payload: {\n        filename,\n      },\n    });\n  };\n\n  const onDrop = useCallback(\n    (acceptedFiles: File[]) => {\n      // Track how long processing takes\n      const startTime = new Date().getTime();\n\n      // First add all the files to the store\n      dispatch({\n        type: Types.ADD_FILES,\n        payload: {\n          files: acceptedFiles,\n        },\n      });\n\n      const promises = acceptedFiles.map(async (file) => {\n        try {\n          const details = await readFileAsGameDetails(file);\n          dispatch({\n            type: Types.SET_DETAILS,\n            payload: {\n              filename: file.name,\n              details,\n            },\n          });\n        } catch (err) {\n          console.error(error);\n          dispatch({\n            type: Types.SET_ERROR,\n            payload: {\n              filename: file.name,\n              error: err,\n            },\n          });\n        }\n      });\n\n      // Print the time taken when complete\n      Promise.all(promises).then(() => {\n        const time = new Date().getTime() - startTime;\n        console.log(`Finished processing in ${time}ms`);\n      });\n    },\n    [dispatch, error]\n  );\n\n  const finishedProcessing = !state.files.find((f) => f.loading);\n  const buttonText =\n    state.files.length === 0 ? \"NO FILES ADDED\" : finishedProcessing ? \"GENERATE STATS\" : \"PLEASE WAIT\";\n\n  if (showOptions) {\n    return (\n      <StatOptions\n        onClose={() => setShowOptions(false)}\n        value={statOptions}\n        onChange={onStatOptionChange}\n        onReset={onStatOptionReset}\n        hideReset={!statsModified}\n      />\n    );\n  }\n\n  return (\n    <div\n      css={css`\n        display: flex;\n        flex-direction: column;\n        flex-wrap: nowrap;\n        width: 100%;\n        height: 100%;\n      `}\n    >\n      <SecondaryButton align=\"right\" onClick={() => setShowOptions(true)}>\n        customize stats\n      </SecondaryButton>\n      <DropPad accept=\".slp\" onDrop={onDrop} />\n      <div\n        css={css`\n          overflow: auto;\n          display: flex;\n          flex-direction: column;\n          margin: 1rem 0;\n        `}\n      >\n        <FileList files={state.files} onRemove={onRemove} />\n      </div>\n      <div>\n        <PrimaryButton\n          backgroundColor={buttonColor}\n          color=\"white\"\n          disabled={state.files.length === 0 || !finishedProcessing}\n          onClick={onClick}\n        >\n          {buttonText}\n        </PrimaryButton>\n        {state.files.length > 0 && <SecondaryButton onClick={clearAll}>reset</SecondaryButton>}\n      </div>\n      {error && <ErrorMessage>{error.message}</ErrorMessage>}\n    </div>\n  );\n};\n","/** @jsx jsx */\nimport { css, jsx } from \"@emotion/core\";\nimport styled from \"@emotion/styled\";\nimport { ExternalLink as A } from \"components/ExternalLink\";\nimport { Header } from \"components/Header\";\nimport { FileListInput } from \"containers/FileListInput\";\nimport React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { hasOpacity } from \"styles/opacity\";\nimport { defaultTheme, GlobalTheme } from \"styles/theme\";\n\nconst linkStyle = css`\n  display: block;\n  text-align: center;\n  text-decoration: none;\n  color: ${defaultTheme.secondaryColor};\n  background: white;\n  padding: 1rem 0rem;\n  width: 100%;\n  font-weight: 700;\n  font-size: 2.3rem;\n  cursor: pointer;\n  ${hasOpacity(0.8)};\n`;\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  padding: 0 2rem;\n`;\n\nexport const MainView: React.FC = () => {\n  const primaryColor = localStorage.getItem(\"primaryColor\") || defaultTheme.primaryColor;\n  const secondaryColor = localStorage.getItem(\"secondaryColor\") || defaultTheme.secondaryColor;\n\n  return (\n    <div\n      css={css`\n        height: 100%;\n        width: 100%;\n        max-width: 80rem;\n        margin: 0 auto;\n      `}\n    >\n      <GlobalTheme primaryColor={primaryColor} secondaryColor={secondaryColor} />\n      <Container>\n        <div\n          css={css`\n            flex: none;\n          `}\n        >\n          <Header\n            css={css`\n              cursor: pointer;\n              font-size: 4rem;\n            `}\n          >\n            Slippi Stats\n            <br />\n            Graphic Generator\n          </Header>\n        </div>\n        <div\n          css={css`\n            flex: 1;\n            display: flex;\n            flex-direction: column;\n            overflow: auto;\n          `}\n        >\n          <FileListInput buttonColor={primaryColor} />\n        </div>\n        <div\n          css={css`\n            flex: none;\n            display: grid;\n            grid-template-columns: repeat(3, 1fr);\n            grid-column-gap: 1rem;\n            padding: 2rem 0;\n          `}\n        >\n          <Link css={linkStyle} to=\"/random\" title=\"Show random sample stats\">\n            DEMO\n          </Link>\n          <A css={linkStyle} title=\"Need help?\" href=\"https://github.com/vinceau/slippi-stats#faq\">\n            FAQ\n          </A>\n          <A css={linkStyle} title=\"Send love\" href=\"https://twitter.com/_vinceau\">\n            AUTHOR\n          </A>\n        </div>\n      </Container>\n    </div>\n  );\n};\n","/** @jsx jsx */\nimport { css, jsx } from \"@emotion/core\";\nimport React from \"react\";\nimport Copy from \"react-copy-to-clipboard\";\n\nexport interface CopyToClipboardProps {\n  text: string;\n  onCopyText?: string;\n  onCopyTimeoutMs?: number;\n}\n\nexport const CopyToClipboard: React.FC<CopyToClipboardProps> = (props) => {\n  const [copied, setCopied] = React.useState(false);\n  const timeoutMs = props.onCopyTimeoutMs ?? 2000;\n  const copyText = props.onCopyText || \"copied!\";\n\n  const onCopy = () => {\n    setCopied(true);\n    setTimeout(() => setCopied(false), timeoutMs);\n  };\n\n  if (copied) {\n    return <span>{copyText}</span>;\n  }\n\n  return (\n    <span\n      css={css`\n        cursor: pointer;\n        &:hover {\n          text-decoration: underline;\n        }\n      `}\n    >\n      <Copy text={props.text} onCopy={onCopy}>\n        {props.children}\n      </Copy>\n    </span>\n  );\n};\n","import styled from \"@emotion/styled\";\nimport React from \"react\";\n\nimport obsImage from \"../styles/images/obs.png\";\n\ninterface OBSLayerOptions {\n  \"layer-name\": string;\n  \"layer-width\": number;\n  \"layer-height\": number;\n}\n\nfunction generateLink(options?: Partial<OBSLayerOptions>): string {\n  let location = window.location.href;\n  for (const [key, val] of Object.entries(options || {})) {\n    location += `&${key}=${val}`;\n  }\n  return location;\n}\n\nconst DraggableLink = styled.a`\n  color: #cccccc;\n  border: solid 0.2rem white;\n  background-color: #333333;\n  display: inline-block;\n  text-decoration: none;\n  padding: 1.5rem 3rem;\n  cursor: move;\n  border-radius: 0.3rem;\n  display: flex;\n  align-items: center;\n  text-transform: uppercase;\n  font-weight: bold;\n`;\n\nexport const OBSDragButton: React.FC<{ options?: Partial<OBSLayerOptions> }> = (props) => {\n  const wrapperRef = React.useRef(null);\n  const location = generateLink(props.options);\n  const pos = 30;\n  const handleDragStart = (e: any) => {\n    const img = new Image();\n    img.src = obsImage;\n    // Customize the visible 'thumbnail' while dragging\n    e.dataTransfer.setDragImage(img, pos, pos);\n    // Set the data type, and the value. You specifically want text/uri-list.\n    e.dataTransfer.setData(\"text/uri-list\", e.target.href);\n  };\n  const handleDragEnd = (e: any) => e.target.blur();\n  return (\n    <DraggableLink\n      href={location}\n      onDragStart={(e) => handleDragStart(e)}\n      onDragEnd={(e) => handleDragEnd(e)}\n      onClick={(e) => e.preventDefault()}\n      ref={wrapperRef}\n    >\n      <img style={{ width: \"3rem\", marginRight: \"1rem\" }} src={obsImage} alt=\"OBS Logo\" /> Drag me into OBS\n    </DraggableLink>\n  );\n};\n","import { useEffect, useState } from \"react\";\nimport { useHistory, useLocation } from \"react-router-dom\";\n\nexport function useParam(key: string, defaultValue = \"\") {\n  const [value, setValue] = useState<string>(defaultValue);\n  const history = useHistory();\n  const location = useLocation();\n\n  useEffect(() => {\n    const params = new URLSearchParams(location.search);\n    const currentValue = params.get(key);\n    if (currentValue !== value) {\n      setValue(currentValue || defaultValue);\n    }\n  }, [key, defaultValue, location, value]);\n\n  const setParam = (val: string) => {\n    const params = new URLSearchParams(location.search);\n    params.set(key, val);\n    const search = \"?\" + params.toString();\n    history.push({\n      pathname: location.pathname,\n      search,\n    });\n  };\n\n  return [value, setParam] as const;\n}\n","// From: https://usehooks.com/useKeyPress/\n\nimport { useEffect, useState } from \"react\";\n\nexport function useKeyPress(targetKey: any) {\n  // State for keeping track of whether key is pressed\n\n  const [keyPressed, setKeyPressed] = useState(false);\n\n  // Add event listeners\n\n  useEffect(() => {\n    // If pressed key is our target key then set to true\n\n    function downHandler({ key }: any) {\n      if (key === targetKey) {\n        setKeyPressed(true);\n      }\n    }\n\n    // If released key is our target key then set to false\n\n    const upHandler = ({ key }: any) => {\n      if (key === targetKey) {\n        setKeyPressed(false);\n      }\n    };\n\n    window.addEventListener(\"keydown\", downHandler);\n\n    window.addEventListener(\"keyup\", upHandler);\n\n    // Remove event listeners on cleanup\n\n    return () => {\n      window.removeEventListener(\"keydown\", downHandler);\n\n      window.removeEventListener(\"keyup\", upHandler);\n    };\n  }, [targetKey]); // Empty array ensures that effect is only run on mount and unmount\n\n  return keyPressed;\n}\n","// From: https://usehooks.com/useOnClickOutside/\n\nimport { useEffect } from \"react\";\n\nexport function useOnClickOutside(ref: any, handler: any) {\n  useEffect(\n    () => {\n      const listener = (event: any) => {\n        // Do nothing if clicking ref's element or descendent elements\n\n        if (!ref.current || ref.current.contains(event.target)) {\n          return;\n        }\n\n        handler(event);\n      };\n\n      document.addEventListener(\"mousedown\", listener);\n\n      document.addEventListener(\"touchstart\", listener);\n\n      return () => {\n        document.removeEventListener(\"mousedown\", listener);\n\n        document.removeEventListener(\"touchstart\", listener);\n      };\n    },\n\n    // Add ref and handler to effect dependencies\n\n    // It's worth noting that because passed in handler is a new\n    // function on every render that will cause this effect\n    // callback/cleanup to run every render. It's not a big deal\n    // but to optimize you can wrap handler in useCallback before\n    // passing it into this hook.\n\n    [ref, handler]\n  );\n}\n","/** @jsx jsx */\nimport { css, jsx } from \"@emotion/core\";\nimport styled from \"@emotion/styled\";\nimport { useOnClickOutside } from \"lib/hooks\";\nimport React, { useRef } from \"react\";\nimport { ChromePicker } from \"react-color\";\nimport { hasOpacity } from \"styles/opacity\";\n\nconst ColorSquare = styled.div<{\n  size: string;\n  color: string;\n}>`\n  cursor: pointer;\n  height: ${(p) => p.size};\n  width: ${(p) => p.size};\n  border-radius: 0.5rem;\n  border: solid 0.1rem rgba(255, 255, 255, 0.2);\n  background-color: ${(p) => p.color};\n`;\n\nconst ResetButton = styled.div`\n  position: absolute;\n  transform: translateX(-50%);\n  margin-top: 0.2rem;\n  margin-left: 50%;\n  font-size: 1.1rem;\n  cursor: pointer;\n  padding: 0.2rem 0.5rem;\n  ${hasOpacity(0.5)};\n`;\n\nexport const ColorPicker: React.FC<{\n  value: string;\n  defaultColor?: string;\n  onChange: (val: string) => void;\n}> = ({ value, onChange, defaultColor }) => {\n  const [show, setShow] = React.useState(false);\n  const wrapperRef = useRef(null);\n  const showReset = defaultColor && value !== defaultColor;\n\n  useOnClickOutside(wrapperRef, () => {\n    if (show) {\n      setShow(false);\n    }\n  });\n\n  const onClick = () => {\n    if (!show) {\n      setShow(true);\n    }\n  };\n\n  const resetClick = () => {\n    if (defaultColor) {\n      onChange(defaultColor);\n    }\n  };\n\n  return (\n    <div style={{ position: \"relative\" }}>\n      <ColorSquare color={value} size=\"5rem\" ref={wrapperRef} onClick={onClick}>\n        {show && (\n          <div\n            css={css`\n              position: absolute;\n              z-index: 9999;\n              bottom: 0;\n            `}\n          >\n            <ChromePicker color={value} onChange={(color) => onChange(color.hex)} />\n          </div>\n        )}\n      </ColorSquare>\n      {showReset && <ResetButton onClick={resetClick}>RESET</ResetButton>}\n    </div>\n  );\n};\n","/** @jsx jsx */ import { css, jsx } from \"@emotion/core\";\nimport styled from \"@emotion/styled\";\nimport { ColorPicker } from \"components/ColorPicker\";\nimport React from \"react\";\n\nconst ColorContainer = styled.div`\n  display: grid;\n  grid-auto-flow: column;\n  grid-gap: 1rem;\n  justify-items: center;\n  align-items: center;\n`;\n\nconst ColorLabel = styled.div`\n  font-weight: 600;\n  font-size: 1.6rem;\n`;\n\nexport interface DualColorPickerProps {\n  leftLabel: string;\n  rightLabel: string;\n  leftColor: string;\n  rightColor: string;\n  defaultLeftColor?: string;\n  defaultRightColor?: string;\n  onLeftColorChange: (color: string) => void;\n  onRightColorChange: (color: string) => void;\n}\n\nexport const DualColorPicker: React.FC<DualColorPickerProps> = (props) => {\n  const {\n    defaultLeftColor,\n    defaultRightColor,\n    leftLabel,\n    rightLabel,\n    leftColor,\n    rightColor,\n    onLeftColorChange,\n    onRightColorChange,\n  } = props;\n  return (\n    <div\n      css={css`\n        display: grid;\n        grid-column-gap: 2.5rem;\n        grid-template-columns: repeat(2, 1fr);\n      `}\n    >\n      <ColorContainer\n        css={css`\n          justify-self: end;\n        `}\n      >\n        <ColorLabel>{leftLabel}</ColorLabel>\n        <div>\n          <ColorPicker value={leftColor} onChange={onLeftColorChange} defaultColor={defaultLeftColor} />\n        </div>\n      </ColorContainer>\n      <ColorContainer\n        css={css`\n          justify-self: start;\n        `}\n      >\n        <div>\n          <ColorPicker value={rightColor} onChange={onRightColorChange} defaultColor={defaultRightColor} />\n        </div>\n        <ColorLabel>{rightLabel}</ColorLabel>\n      </ColorContainer>\n    </div>\n  );\n};\n","/** @jsx jsx */ import { css, jsx } from \"@emotion/core\";\nimport { DualColorPicker } from \"components/ColorPicker\";\nimport { useParam } from \"lib/hooks\";\nimport React from \"react\";\n\nexport interface DualColorPanelProps {\n  panelLabel: string;\n  leftLabel: string;\n  leftColorParam: string;\n  leftDefault: string;\n  rightLabel: string;\n  rightColorParam: string;\n  rightDefault: string;\n}\n\nexport const DualColorPanel: React.FC<DualColorPanelProps> = (props) => {\n  const { panelLabel, leftLabel, leftColorParam, leftDefault, rightLabel, rightColorParam, rightDefault } = props;\n  const existingLeftColor = localStorage.getItem(leftColorParam);\n  const existingRightColor = localStorage.getItem(rightColorParam);\n  const [leftColor, setLeftColor] = useParam(leftColorParam, existingLeftColor || leftDefault);\n  const [rightColor, setRightColor] = useParam(rightColorParam, existingRightColor || rightDefault);\n\n  const onLeftColorChange = (color: string) => {\n    localStorage.setItem(leftColorParam, color);\n    setLeftColor(color);\n  };\n\n  const onRightColorChange = (color: string) => {\n    localStorage.setItem(rightColorParam, color);\n    setRightColor(color);\n  };\n\n  return (\n    <Panel title={panelLabel}>\n      <DualColorPicker\n        leftLabel={leftLabel}\n        rightLabel={rightLabel}\n        leftColor={leftColor}\n        rightColor={rightColor}\n        defaultLeftColor={leftDefault}\n        defaultRightColor={rightDefault}\n        onLeftColorChange={onLeftColorChange}\n        onRightColorChange={onRightColorChange}\n      />\n    </Panel>\n  );\n};\n\nconst Panel: React.FC<{ title: string }> = (props) => {\n  return (\n    <div>\n      <div\n        css={css`\n          text-align: center;\n          margin-bottom: 2rem;\n          font-weight: 800;\n          font-size: 2rem;\n        `}\n      >\n        {props.title}\n      </div>\n      {props.children}\n    </div>\n  );\n};\n","/** @jsx jsx */\nimport { css, jsx } from \"@emotion/core\";\nimport styled from \"@emotion/styled\";\nimport { characters as characterUtil } from \"@slippi/slippi-js\";\nimport { CopyToClipboard } from \"components/CopyToClipboard\";\nimport { ExternalLink as A } from \"components/ExternalLink\";\nimport { OBSDragButton } from \"components/OBSDragButton\";\nimport { useOnClickOutside, useParam } from \"lib/hooks\";\nimport { PortColor } from \"lib/portColor\";\nimport React from \"react\";\nimport { hasOpacity } from \"styles/opacity\";\nimport { defaultTheme } from \"styles/theme\";\n\nimport { DualColorPanel } from \"./Panel\";\n\nconst Content = styled.div`\n  padding-top: 2rem;\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n`;\n\nconst Column = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n`;\n\nconst Heading = styled.h2`\n  display: block;\n  position: absolute;\n  width: 100%;\n  top: 0;\n  transform: translateY(-100%);\n  background-color: inherit;\n  margin: 0;\n  text-align: center;\n  padding: 1rem 0;\n  font-size: 2rem;\n  &::after {\n    content: \"\";\n    display: block;\n    background-image: linear-gradient(to right, transparent, rgba(255, 255, 255, 0.2), transparent);\n    height: 0.1rem;\n    position: absolute;\n    width: 80%;\n    margin-left: 10%;\n    bottom: 0;\n  }\n`;\n\nconst Outer = styled.div`\n  position: fixed;\n  top: 100%;\n  left: 0;\n  width: 100%;\n  background-color: black;\n  opacity: 0.2;\n  z-index: 10;\n  &.closed:hover {\n    cursor: pointer;\n    opacity: 0.8;\n  }\n  &.open {\n    opacity: 1;\n    transform: translateY(-100%);\n    .close-button {\n      opacity: 1;\n    }\n  }\n  transition: all 0.2s ease-in-out;\n  .close-button {\n    z-index: 10;\n    position: absolute;\n    right: 3rem;\n    top: 1rem;\n    opacity: 0;\n    transition: opacity 0.2s ease-in-out;\n    color: black;\n    background-color: white;\n    padding: 0.2rem 1rem;\n    font-weight: bold;\n    font-size: 2.5rem;\n    cursor: pointer;\n    transform: translateY(-100%);\n  }\n`;\n\nexport const Options: React.FC = () => {\n  const [open, setOpen] = React.useState(false);\n  const [char1] = useParam(\"char1\");\n  const [char2] = useParam(\"char2\");\n\n  const charName1 = characterUtil.getCharacterShortName(+char1);\n  const charName2 = characterUtil.getCharacterShortName(+char2);\n  const obsLayerName = `Slippi Stats - ${charName1} v ${charName2}`;\n\n  const outerRef = React.useRef(null);\n\n  useOnClickOutside(outerRef, () => {\n    if (open) {\n      setOpen(false);\n    }\n  });\n\n  const showOptions = () => {\n    if (!open) {\n      setOpen(true);\n    }\n  };\n\n  const closeOptions = () => setOpen(false);\n\n  return (\n    <Outer className={open ? \"open\" : \"closed\"} ref={outerRef} onClick={showOptions}>\n      <div className=\"close-button\" onClick={closeOptions} title=\"Close\">\n        ✕\n      </div>\n      <Heading>OPTIONS</Heading>\n      <Content>\n        <Column>\n          <DualColorPanel\n            panelLabel=\"PLAYER COLOR\"\n            leftLabel=\"LEFT\"\n            rightLabel=\"RIGHT\"\n            leftDefault={PortColor.P1}\n            leftColorParam=\"leftColor\"\n            rightColorParam=\"rightColor\"\n            rightDefault={PortColor.P2}\n          />\n        </Column>\n        <Column>\n          <div\n            css={css`\n              margin-top: 1rem;\n            `}\n          >\n            <OBSDragButton options={{ \"layer-name\": obsLayerName, \"layer-width\": 1920, \"layer-height\": 1080 }} />\n            <div\n              css={css`\n                margin-top: 0.5rem;\n                text-align: center;\n                font-size: 1.2rem;\n                ${hasOpacity(0.5)};\n              `}\n            >\n              <CopyToClipboard text={window.location.href}>\n                <span>copy link to clipboard</span>\n              </CopyToClipboard>\n            </div>\n          </div>\n          <div\n            css={css`\n              font-size: 1.5rem;\n              margin: 2rem 0;\n              ${hasOpacity(0.5)}\n              a:hover {\n                text-decoration: underline;\n              }\n            `}\n          >\n            Made with love by <A href=\"https://twitter.com/_vinceau\">Vince Au</A>\n          </div>\n        </Column>\n        <Column>\n          <DualColorPanel\n            panelLabel=\"THEME COLOR\"\n            leftLabel=\"PRIMARY\"\n            rightLabel=\"SECONDARY\"\n            leftDefault={defaultTheme.primaryColor}\n            leftColorParam=\"primaryColor\"\n            rightColorParam=\"secondaryColor\"\n            rightDefault={defaultTheme.secondaryColor}\n          />\n        </Column>\n      </Content>\n    </Outer>\n  );\n};\n","/** @jsx jsx */\nimport { css, jsx } from \"@emotion/core\";\nimport { Character } from \"@slippi/slippi-js\";\nimport { useParam } from \"lib/hooks\";\nimport { getCharacterVSScreen, Side } from \"lib/resources\";\nimport React from \"react\";\n\nexport interface CharDisplayProps {\n  colorParam: string;\n  charParam: string;\n  align: Side;\n  theme: string;\n}\n\n// Some characters have their faces to the right so it gets cut off.\n// Adjust the alignment so you can properly see their faces.\nconst RIGHT_CHAR_ALIGNMENT = new Map<Character, string>();\nRIGHT_CHAR_ALIGNMENT.set(Character.BOWSER, \"right top\");\nRIGHT_CHAR_ALIGNMENT.set(Character.SHEIK, \"right top\");\nRIGHT_CHAR_ALIGNMENT.set(Character.ROY, \"left 80%\");\n\nfunction getAlignment(facing: Side, char: string, defaultAlignment: string): string {\n  // We only care custom alignments for the right hand side of the VS-screen\n  if (facing === \"right\") {\n    const customCharAlign = RIGHT_CHAR_ALIGNMENT.get(+char);\n    if (customCharAlign) {\n      return customCharAlign;\n    }\n  }\n\n  return defaultAlignment;\n}\n\nexport const CharDisplay: React.FC<CharDisplayProps> = (props) => {\n  const { colorParam, charParam, align, theme } = props;\n  const [color] = useParam(colorParam);\n  const [char] = useParam(charParam);\n  const facing: Side = align === \"left\" ? \"right\" : \"left\";\n  const imgSrc = getCharacterVSScreen(facing, char, color);\n  const alignment = getAlignment(facing, char, `${align} top`);\n  return (\n    <div\n      css={css`\n        height: 80%;\n        width: 100%;\n        position: relative;\n        background: radial-gradient(circle at center -30%, ${theme}, transparent);\n        &::after {\n          content: ' ';\n          position: absolute;\n          height: 100%;\n          width: 100%;\n          background-image: url(\"${imgSrc}\");\n          background-repeat: no-repeat;\n          background-size: cover;\n          background-position: ${alignment};\n        }\n      `}\n    ></div>\n  );\n};\n","import styled from \"@emotion/styled\";\n\nexport const Block = styled.div<{\n  color: string;\n  backgroundColor: string;\n}>`\n  color: ${(p) => p.color};\n  background-color: ${(p) => p.backgroundColor};\n  text-align: center;\n  padding: 0.3em 0;\n  font-size: 1.2em;\n  box-shadow: 0.2em 0.2em 0.2em black;\n`;\n","// From: https://dev.to/joelmturner/build-an-inline-edit-text-input-with-react-hooks-4nah\n\nimport \"./index.scss\";\n\nimport { useKeyPress, useOnClickOutside } from \"lib/hooks\";\nimport React, { useEffect, useRef, useState } from \"react\";\n\nexport interface InlineEditProps {\n  text: string;\n  textAlign?: \"left\" | \"right\";\n  onSetText: (text: string) => void;\n  onBlur?: () => void;\n  onFocus?: () => void;\n  placeholder?: string;\n}\n\nexport const InlineEdit: React.FC<InlineEditProps> = (props) => {\n  const { text, onSetText, textAlign, placeholder } = props;\n  const [isInputActive, _setIsInputActive] = useState(false);\n  const [inputValue, setInputValue] = useState(text);\n\n  const setIsInputActive = React.useCallback(\n    (isActive: boolean) => {\n      if (isActive !== isInputActive) {\n        // Value has changed\n        if (isActive && props.onFocus) {\n          props.onFocus();\n        }\n\n        if (!isActive && props.onBlur) {\n          props.onBlur();\n        }\n      }\n      _setIsInputActive(isActive);\n    },\n    [isInputActive, props]\n  );\n\n  const wrapperRef = useRef(null);\n  const textRef = useRef(null);\n  const inputRef = useRef<HTMLInputElement>(null);\n\n  const tab = useKeyPress(\"Tab\");\n  const enter = useKeyPress(\"Enter\");\n  const esc = useKeyPress(\"Escape\");\n\n  useEffect(() => {\n    setInputValue(text);\n  }, [text]);\n\n  // check to see if the user clicked outside of this component\n  useOnClickOutside(wrapperRef, () => {\n    if (isInputActive) {\n      onSetText(inputValue);\n      setIsInputActive(false);\n    }\n  });\n\n  // focus the cursor in the input field on edit start\n  useEffect(() => {\n    if (isInputActive && inputRef.current) {\n      inputRef.current.focus();\n    }\n  }, [isInputActive]);\n\n  useEffect(() => {\n    if (isInputActive) {\n      // if Enter or tab is pressed, save the text and case the editor\n      if (enter || tab) {\n        onSetText(inputValue);\n        setIsInputActive(false);\n      }\n      // if Escape is pressed, revert the text and close the editor\n      if (esc) {\n        setInputValue(props.text);\n        setIsInputActive(false);\n      }\n    }\n  }, [tab, enter, esc, isInputActive, onSetText, setIsInputActive, inputValue, props.text]); // watch for key presses\n\n  return (\n    <span className=\"inline-text\" ref={wrapperRef}>\n      <span\n        ref={textRef}\n        onClick={() => setIsInputActive(true)}\n        className={`inline-text_copy inline-text_copy--${!isInputActive ? \"active\" : \"hidden\"}`}\n      >\n        {props.text || placeholder}\n      </span>\n      <input\n        ref={inputRef}\n        style={{ textAlign, maxWidth: \"100%\" }}\n        value={inputValue}\n        onChange={(e) => {\n          setInputValue(e.target.value);\n        }}\n        className={`inline-text_input inline-text_input--${isInputActive ? \"active\" : \"hidden\"}`}\n      />\n    </span>\n  );\n};\n\nInlineEdit.defaultProps = {\n  text: \"\",\n  // eslint-disable-next-line @typescript-eslint/no-empty-function\n  onSetText: () => {},\n};\n","import styled from \"@emotion/styled\";\nimport React from \"react\";\nimport { hasOpacity } from \"styles/opacity\";\n\nimport { InlineEdit } from \"../InlineEdit\";\nimport { Block } from \"./Block\";\n\nexport interface EditBlockProps {\n  color: string;\n  backgroundColor: string;\n  value: string;\n  placeholder?: string;\n  onEdit: (val: string) => void;\n}\n\nexport const EditBlock: React.FC<EditBlockProps> = ({ onEdit, backgroundColor, value, color }) => {\n  return (\n    <Block color={color} backgroundColor={backgroundColor}>\n      <InlineEdit text={value} onSetText={onEdit} />\n    </Block>\n  );\n};\n\nconst OptionalBlock = styled(Block)<{\n  show?: boolean;\n}>`\n  ${(p) => hasOpacity(p.show ? 1 : 0)};\n  position: relative;\n  &:hover {\n    z-index: 10;\n  }\n`;\n\nexport const OptionalEditBlock: React.FC<EditBlockProps> = ({ onEdit, backgroundColor, value, color, placeholder }) => {\n  const [focused, setFocused] = React.useState(false);\n  const show = focused || Boolean(value);\n  return (\n    <OptionalBlock show={show} color={color} backgroundColor={backgroundColor}>\n      <InlineEdit\n        text={value}\n        onSetText={onEdit}\n        onFocus={() => setFocused(true)}\n        onBlur={() => setFocused(false)}\n        placeholder={placeholder}\n      />\n    </OptionalBlock>\n  );\n};\n\nOptionalEditBlock.defaultProps = {\n  placeholder: \"click to edit\",\n};\n","import styled from \"@emotion/styled\";\nimport { OptionalEditBlock } from \"components/Block\";\nimport { useParam } from \"lib/hooks\";\nimport React from \"react\";\n\nconst Name = styled.div`\n  font-size: 150%;\n  font-weight: 800;\n`;\n\nconst Subtitle = styled.div<{\n  show?: boolean;\n}>`\n  margin-top: -0.3rem;\n  margin-left: auto;\n  margin-right: auto;\n  width: 80%;\n  font-weight: 600;\n`;\n\nexport interface NameBlockProps {\n  nameParam: string;\n  subtitleParam: string;\n  primaryColor: string;\n}\n\nexport const NameBlock: React.FC<NameBlockProps> = ({ nameParam, subtitleParam, primaryColor }) => {\n  const [name, setName] = useParam(nameParam);\n  const [sub, setSub] = useParam(subtitleParam);\n  return (\n    <div>\n      <Name>\n        <OptionalEditBlock value={name} onEdit={setName} color=\"white\" backgroundColor={primaryColor} />\n      </Name>\n      <Subtitle>\n        <OptionalEditBlock value={sub} onEdit={setSub} color=\"black\" backgroundColor=\"white\" />\n      </Subtitle>\n    </div>\n  );\n};\n","import styled from \"@emotion/styled\";\nimport { getCharacterPortrait } from \"lib/resources\";\nimport React from \"react\";\n\nconst Outer = styled.div<{\n  borderColor: string;\n  onClick?: () => void;\n}>`\n  position: relative;\n  display: block;\n  border: solid 0.1rem ${(p) => p.borderColor};\n  height: 5rem;\n  width: 100%;\n  max-width: 10rem;\n  ${(p) => (p.onClick ? \"cursor: pointer;\" : \"\")}\n`;\n\nconst BaseHeadImage = styled.div`\n  height: 100%;\n  width: 100%;\n  position: absolute;\n  &::after {\n    content: \" \";\n    height: 100%;\n    background-repeat: no-repeat;\n    background-size: cover;\n    position: absolute;\n  }\n`;\n\nconst HeadImage = styled(BaseHeadImage)<{\n  backgroundColor?: string;\n  imageSrc: string;\n  side: \"left\" | \"right\";\n  waypoint: number;\n  dim?: boolean;\n}>`\n  ${(p) => {\n    const invWaypoint = 100 - p.waypoint;\n    return `\n      ${p.side === \"right\" ? `clip-path: polygon(${p.waypoint}% 0, 100% 0, 100% 100%, ${invWaypoint}% 100%);` : \"\"}\n      ${p.dim ? \"filter: brightness(25%);\" : \"\"}\n      ${p.backgroundColor ? `background: radial-gradient(circle at center -30%, ${p.backgroundColor}, black);` : \"\"}\n      &::after {\n        width: ${p.waypoint}%;\n        background-image: url(\"${p.imageSrc}\");\n        background-position: top ${p.side};\n        ${p.side === \"right\" ? `left: ${invWaypoint}%;` : \"transform: scaleX(-1);\"}\n      }\n    `;\n  }}\n`;\n\nexport interface HeadToHeadProps {\n  char1: number | string;\n  color1: string;\n  result1: string;\n  char2: number | string;\n  color2: string;\n  result2: string;\n  leftColor: string;\n  rightColor: string;\n  borderColor?: string;\n  onClick?: () => void;\n}\n\nexport const HeadToHead: React.FC<HeadToHeadProps> = ({\n  char1,\n  color1,\n  result1,\n  char2,\n  color2,\n  result2,\n  leftColor,\n  rightColor,\n  borderColor,\n  onClick,\n}) => {\n  const waypoint = 55;\n  const p1 = getCharacterPortrait(char1, color1);\n  const p2 = getCharacterPortrait(char2, color2);\n\n  const clickHandler = () => {\n    if (onClick) {\n      onClick();\n    }\n  };\n\n  return (\n    <Outer borderColor={borderColor || \"transparent\"} onClick={clickHandler}>\n      <HeadImage backgroundColor={leftColor} imageSrc={p1} waypoint={waypoint} side=\"left\" dim={result1 === \"loser\"} />\n      <HeadImage\n        backgroundColor={rightColor}\n        imageSrc={p2}\n        waypoint={waypoint}\n        side=\"right\"\n        dim={result2 === \"loser\"}\n      />\n    </Outer>\n  );\n};\n","import styled from \"@emotion/styled\";\nimport { getStageIcon } from \"lib/resources\";\nimport React from \"react\";\n\nconst Text = styled.span`\n  font-size: 2.5rem;\n  font-weight: bold;\n  opacity: 0.85;\n  text-shadow: 2px 2px 2px black;\n`;\n\nconst Outer = styled.div<{\n  image: string;\n  borderColor: string;\n}>`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: relative;\n  height: 9rem;\n  width: 100%;\n  border: solid 1px ${(p) => p.borderColor};\n  z-index: 0;\n\n  &::after {\n    content: ' ';\n    height: 100%;\n    width: 100%;\n    position: absolute;\n    top: 0;\n    left: 0;\n    background-image: url(\"${(p) => p.image}\");\n    background-repeat: no-repeat;\n    background-size: cover;\n    background-position: center;\n    filter: brightness(35%);\n    z-index: -1;\n  }\n`;\n\ninterface StageTimerProps {\n  stageId: string | number;\n  duration: string;\n  borderColor?: string;\n}\n\nexport const StageTimer: React.FC<StageTimerProps> = ({ stageId, duration, borderColor }) => {\n  const stageIcon = getStageIcon(stageId);\n  return (\n    <Outer image={stageIcon} borderColor={borderColor || \"transparent\"}>\n      <Text>{duration}</Text>\n    </Outer>\n  );\n};\n","/** @jsx jsx */\nimport { css, jsx } from \"@emotion/core\";\nimport { HeadToHead } from \"components/HeadToHead\";\nimport { StageTimer } from \"components/StageTimer\";\nimport { GameInfo } from \"lib/hooks\";\nimport React from \"react\";\n\nexport interface GameResultProps {\n  gameInfo: GameInfo | null;\n  onGameInfoChange: (info: Partial<GameInfo>) => void;\n  leftColor: string;\n  rightColor: string;\n  winningSide?: string;\n}\n\nconst switchResult = (res: string): string => {\n  return res === \"winner\" ? \"loser\" : res === \"loser\" ? \"winner\" : res;\n};\n\nexport const GameResult: React.FC<GameResultProps> = (props) => {\n  const { gameInfo, onGameInfoChange } = props;\n  if (!gameInfo) {\n    return null;\n  }\n\n  const gameWinner = gameInfo.result1 === \"winner\" ? \"left\" : gameInfo.result2 === \"winner\" ? \"right\" : \"\";\n  const highlight = props.winningSide === gameWinner;\n\n  const { stageId, duration, ...rest } = gameInfo;\n  const borderColor = `rgba(255, 255, 255, ${highlight ? 1 : 0.2})`;\n\n  const onClick = () => {\n    onGameInfoChange({\n      result1: switchResult(gameInfo.result1),\n      result2: switchResult(gameInfo.result2),\n    });\n  };\n\n  return (\n    <div\n      css={css`\n        display: grid;\n        grid-template-columns: 100%;\n        justify-items: center;\n        width: 100%;\n        max-width: 18rem;\n        grid-row-gap: 2rem;\n      `}\n    >\n      <HeadToHead\n        onClick={onClick}\n        leftColor={props.leftColor}\n        rightColor={props.rightColor}\n        borderColor={borderColor}\n        {...rest}\n      />\n      <StageTimer stageId={stageId} duration={duration} borderColor={borderColor} />\n    </div>\n  );\n};\n","/** @jsx jsx */\nimport { css, jsx } from \"@emotion/core\";\nimport { GameInfo } from \"lib/hooks\";\nimport React from \"react\";\n\nimport { GameResult } from \"./GameResult\";\n\nexport const GameDisplay: React.FC<{\n  games: Array<GameInfo | null>;\n  updateGameInfo: (gameNumber: number, gameInfo: Partial<GameInfo>) => void;\n  leftColor: string;\n  rightColor: string;\n  winningSide?: string;\n}> = (props) => {\n  return (\n    <div\n      css={css`\n        display: grid;\n        grid-column-gap: 2rem;\n        grid-template-columns: repeat(${props.games.length}, 1fr);\n        justify-items: center;\n      `}\n    >\n      {props.games.map((game, i) => (\n        <GameResult\n          key={`game${i}`}\n          gameInfo={game}\n          onGameInfoChange={(info) => props.updateGameInfo(i + 1, info)}\n          leftColor={props.leftColor}\n          rightColor={props.rightColor}\n          winningSide={props.winningSide}\n        />\n      ))}\n    </div>\n  );\n};\n","import styled from \"@emotion/styled\";\n\nexport const Divider = styled.div`\n  content: \" \";\n  display: block;\n  height: 0.1rem;\n  width: 100%;\n  margin-top: 0.7rem;\n  background-color: rgba(255, 255, 255, 0.05);\n`;\n","import styled from \"@emotion/styled\";\nimport { hasOpacity } from \"styles/opacity\";\n\nexport const StatDisplayItem = styled.div<{\n  hasItem: boolean;\n  isDragging?: boolean;\n  isDraggingOver?: boolean;\n}>`\n  padding: 1rem 0;\n  user-select: none;\n  .remove {\n    display: none;\n    position: absolute;\n    top: -20%;\n    right: 20%;\n    padding: 0.5rem 1.5rem;\n    color: black;\n    background-color: white;\n    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.19), 0 6px 6px rgba(0, 0, 0, 0.23);\n    font-weight: 600;\n    transition: all 0.2s ease-in-out;\n    cursor: pointer;\n    ${hasOpacity(0.4, 0.8)}\n  }\n  ${(p) =>\n    !p.hasItem || p.isDraggingOver\n      ? \"\"\n      : `\n  &:hover {\n    .remove {\n      display: block;\n    }\n  };\n  `}\n`;\n","/** @jsx jsx */\nimport { css, jsx } from \"@emotion/core\";\nimport styled from \"@emotion/styled\";\nimport React from \"react\";\n\nimport { Block } from \"./Block\";\n\nexport interface StatProps {\n  label: string;\n  color: string;\n  backgroundColor: string;\n  leftComponent: React.ReactNode;\n  rightComponent: React.ReactNode;\n}\n\nconst StatLabel = styled(Block)`\n  padding: 0.3em 2.5em;\n  font-weight: 700;\n  font-size: 1.2em;\n  justify-self: center;\n`;\n\nconst StatContent = styled.div`\n  width: 100%;\n  font-weight: 800;\n  font-size: 2.3em;\n`;\n\nconst TextContent = styled(StatContent)`\n  font-size: 1.4em;\n`;\n\nconst OuterStat = styled.div`\n  display: grid;\n  grid-template-columns: 20% 60% 20%;\n  width: 100%;\n  align-items: center;\n  position: relative;\n\n  &::before {\n    z-index: -1;\n    content: \"\";\n    display: block;\n    background-image: linear-gradient(to right, transparent, rgba(255, 255, 255, 0.4), transparent);\n    height: 0.1rem;\n    position: absolute;\n    width: 80%;\n    margin-left: 50%;\n    transform: translate(-50%, -50%);\n  }\n`;\n\nconst Stat: React.FC<StatProps & Record<string, any>> = (props) => {\n  const { label, backgroundColor, color, leftComponent, rightComponent, children, ...rest } = props;\n  return (\n    <OuterStat>\n      <div\n        css={css`\n          width: 100%;\n          justify-self: start;\n        `}\n      >\n        {leftComponent}\n      </div>\n      <StatLabel backgroundColor={backgroundColor} color={color} {...rest}>\n        {label}\n      </StatLabel>\n      <div\n        css={css`\n          width: 100%;\n          justify-self: end;\n          text-align: right;\n        `}\n      >\n        {rightComponent}\n      </div>\n    </OuterStat>\n  );\n};\n\nStat.defaultProps = {\n  color: \"black\",\n  backgroundColor: \"white\",\n};\n\nexport const NumberStat: React.FC<StatProps> = (props) => {\n  const { leftComponent, rightComponent, ...rest } = props;\n  return (\n    <Stat\n      leftComponent={<StatContent>{leftComponent}</StatContent>}\n      rightComponent={<StatContent>{rightComponent}</StatContent>}\n      {...rest}\n    />\n  );\n};\n\nexport const TextStat: React.FC<StatProps> = (props) => {\n  const { leftComponent, rightComponent, ...rest } = props;\n  return (\n    <Stat\n      leftComponent={<TextContent>{leftComponent}</TextContent>}\n      rightComponent={<TextContent>{rightComponent}</TextContent>}\n      {...rest}\n    />\n  );\n};\n","import { InlineEdit } from \"components/InlineEdit\";\nimport { NumberStat, TextStat } from \"components/Stat\";\nimport { useParam } from \"lib/hooks\";\nimport { STAT_DEFINITIONS } from \"lib/stats\";\nimport React from \"react\";\nimport { Theme } from \"styles/theme\";\n\ninterface ConnectedStatProps {\n  param1: string;\n  param2: string;\n  label: string;\n}\n\nconst ConnectedNumberStat: React.FC<ConnectedStatProps & Record<string, any>> = (props) => {\n  const { param1, param2, label, children, ...rest } = props;\n  const defaultValue = \"0\";\n  const [field1, setField1] = useParam(param1, defaultValue);\n  const [field2, setField2] = useParam(param2, defaultValue);\n  return (\n    <NumberStat\n      label={label}\n      color=\"black\"\n      backgroundColor=\"white\"\n      leftComponent={<InlineEdit text={field1} onSetText={setField1} />}\n      rightComponent={<InlineEdit text={field2} textAlign=\"right\" onSetText={setField2} />}\n      {...rest}\n    />\n  );\n};\n\nconst ConnectedTextStat: React.FC<ConnectedStatProps & Theme & Record<string, any>> = (props) => {\n  const { param1, param2, label, primaryColor, children, ...rest } = props;\n  const defaultValue = \"-\";\n  const [field1, setField1] = useParam(param1, defaultValue);\n  const [field2, setField2] = useParam(param2, defaultValue);\n  return (\n    <TextStat\n      label={label}\n      color=\"white\"\n      backgroundColor={primaryColor}\n      leftComponent={<InlineEdit text={field1} onSetText={setField1} />}\n      rightComponent={<InlineEdit text={field2} textAlign=\"right\" onSetText={setField2} />}\n      {...rest}\n    />\n  );\n};\n\nexport const Statistic: React.FC<\n  {\n    theme: Theme;\n    statId: string;\n  } & Record<string, any>\n> = (props) => {\n  const { statId, theme, children, ...rest } = props;\n  const statInfo = STAT_DEFINITIONS.get(statId);\n  if (!statInfo) {\n    return null;\n  }\n\n  const { name, type } = statInfo;\n  const label = (name as string).toUpperCase();\n  if (type === \"number\") {\n    return <ConnectedNumberStat param1={`${statId}1`} param2={`${statId}2`} label={label} {...rest} />;\n  } else if (type === \"text\") {\n    return <ConnectedTextStat param1={`${statId}1`} param2={`${statId}2`} label={label} {...theme} {...rest} />;\n  }\n\n  return null;\n};\n","/** @jsx jsx */\nimport { css, jsx } from \"@emotion/core\";\nimport { reorder } from \"lib/util\";\nimport React from \"react\";\nimport { DragDropContext, Draggable, Droppable } from \"react-beautiful-dnd\";\nimport { Theme } from \"styles/theme\";\n\nimport { Divider } from \"./Divider\";\nimport { StatDisplayItem } from \"./StatDisplayItem\";\nimport { Statistic } from \"./Statistic\";\n\ninterface StatDisplayListProps {\n  theme: Theme;\n  stats: string;\n  setStats: (s: string) => void;\n}\n\nexport const StatDisplayList: React.FC<StatDisplayListProps> = (props) => {\n  const { theme, stats, setStats } = props;\n  const [items, setItems] = React.useState<string[]>(stats.split(\",\"));\n  React.useEffect(() => {\n    setItems(stats.split(\",\"));\n  }, [stats]);\n\n  const updateStats = (statIds: string[]) => {\n    // First update the local state\n    setItems(statIds);\n    // Then update the URL state\n    setStats(statIds.join(\",\"));\n  };\n\n  const onDragEnd = (result: any) => {\n    // dropped outside the list\n    if (!result.destination) {\n      return;\n    }\n    const newItems = reorder(items, result.source.index, result.destination.index);\n    updateStats(newItems);\n  };\n\n  const onRemove = (statId: string) => {\n    const newItems = items.filter((s) => s !== statId);\n    updateStats(newItems);\n  };\n\n  return (\n    <DragDropContext onDragEnd={onDragEnd}>\n      <Droppable droppableId=\"droppable\">\n        {(dropProvided, dropSnapshot) => (\n          <div\n            {...dropProvided.droppableProps}\n            ref={dropProvided.innerRef}\n            css={css`\n              margin: -1rem 0;\n            `}\n          >\n            {items.map((item, index) => {\n              const key = item ? item : \"divider\";\n              return (\n                <Draggable key={key} draggableId={key} index={index}>\n                  {(dragProvided, dragSnapshot) => {\n                    const additionalStyles = item ? null : dragProvided.dragHandleProps;\n                    return (\n                      <StatDisplayItem\n                        ref={dragProvided.innerRef}\n                        hasItem={Boolean(item)}\n                        isDraggingOver={dropSnapshot.isDraggingOver}\n                        {...dragProvided.draggableProps}\n                        {...additionalStyles}\n                        style={dragProvided.draggableProps.style}\n                      >\n                        {item ? (\n                          <div\n                            css={css`\n                              position: relative;\n                            `}\n                          >\n                            <Statistic statId={item} theme={theme} {...dragProvided.dragHandleProps} />\n                            <div className=\"remove\" onClick={() => onRemove(item)}>\n                              ✕\n                              <span\n                                css={css`\n                                  margin-left: 1rem;\n                                `}\n                              >\n                                REMOVE\n                              </span>\n                            </div>\n                          </div>\n                        ) : (\n                          <Divider />\n                        )}\n                      </StatDisplayItem>\n                    );\n                  }}\n                </Draggable>\n              );\n            })}\n            {dropProvided.placeholder}\n          </div>\n        )}\n      </Droppable>\n    </DragDropContext>\n  );\n};\n","/** @jsx jsx */\nimport { css, jsx } from \"@emotion/core\";\nimport styled from \"@emotion/styled\";\nimport { Block } from \"components/Block\";\nimport { GameDisplay } from \"components/GameDisplay\";\nimport { useGames, useParam } from \"lib/hooks\";\nimport React from \"react\";\n\nimport { Divider } from \"./Divider\";\nimport { StatDisplayList } from \"./StatDisplayList\";\n\nconst ScoreBlock = styled(Block)`\n  padding: 0.5rem 4rem;\n  font-size: 5rem;\n  font-weight: 800;\n  position: absolute;\n  bottom: -6rem;\n  left: 50%;\n  transform: translateX(-50%);\n`;\n\nexport const StatDisplay: React.FC<{\n  primaryColor: string;\n  secondaryColor: string;\n  leftColor: string;\n  rightColor: string;\n}> = (props) => {\n  const { games, score, setGame } = useGames();\n  const [stats, setStats] = useParam(\"stats\");\n  const winningSide = score.left > score.right ? \"left\" : score.right > score.left ? \"right\" : \"\";\n  const { leftColor, rightColor, ...theme } = props;\n\n  return (\n    <div\n      css={css`\n        background: linear-gradient(to right, ${props.secondaryColor}, transparent, ${props.secondaryColor});\n        width: 100%;\n      `}\n    >\n      <div\n        css={css`\n          display: grid;\n          grid-template-columns: 100%;\n          grid-row-gap: 2rem;\n          margin: 4rem;\n        `}\n      >\n        <StatDisplayList stats={stats} setStats={setStats} theme={theme} />\n        <Divider />\n        <GameDisplay\n          games={games}\n          updateGameInfo={setGame}\n          winningSide={winningSide}\n          leftColor={leftColor}\n          rightColor={rightColor}\n        />\n      </div>\n      <ScoreBlock color=\"white\" backgroundColor={props.primaryColor}>\n        {`${score.left} - ${score.right}`}\n      </ScoreBlock>\n    </div>\n  );\n};\n","import { useEffect, useState } from \"react\";\nimport { useHistory, useLocation } from \"react-router-dom\";\n\nexport interface GameInfo {\n  stageId: string;\n  duration: string;\n  char1: string;\n  color1: string;\n  result1: string;\n  char2: string;\n  color2: string;\n  result2: string;\n}\n\nexport function useGames() {\n  const [games, setGames] = useState<Array<GameInfo | null>>([]);\n  const [score, setScore] = useState<{ left: number; right: number }>({ left: 0, right: 0 });\n  const history = useHistory();\n  const location = useLocation();\n\n  useEffect(() => {\n    const params = new URLSearchParams(location.search);\n    const gt = params.get(\"gt\") || \"0\";\n    const totalGames = parseInt(gt, 10) || 0;\n\n    let char1Score = 0;\n    let char2Score = 0;\n\n    const gameInfos: Array<GameInfo | null> = [];\n\n    for (let i = 1; i <= totalGames; i++) {\n      const gameInfoString = params.get(`g${i}`);\n\n      if (!gameInfoString) {\n        // Game is undefined\n        gameInfos.push(null);\n        continue;\n      }\n\n      // Generate the game info\n      const [stageId, duration, char1, color1, result1, char2, color2, result2] = gameInfoString.split(\",\");\n      gameInfos.push({\n        stageId,\n        duration,\n        char1,\n        color1,\n        result1,\n        char2,\n        color2,\n        result2,\n      });\n\n      // Update the scores\n      if (result1 === \"winner\") {\n        char1Score += 1;\n      }\n\n      if (result2 === \"winner\") {\n        char2Score += 1;\n      }\n    }\n\n    setGames(gameInfos);\n    setScore({ left: char1Score, right: char2Score });\n  }, [location]);\n\n  const setParam = (gameNumber: number, val: Partial<GameInfo>) => {\n    const currentGameData = games[gameNumber - 1];\n    const newValues = Object.assign({}, currentGameData, val);\n    const { stageId, duration, char1, color1, result1, char2, color2, result2 } = newValues;\n    const infoString = [stageId, duration, char1, color1, result1, char2, color2, result2].join(\",\");\n\n    const params = new URLSearchParams(location.search);\n    params.set(`g${gameNumber}`, infoString);\n    const search = \"?\" + params.toString();\n    history.push({\n      pathname: location.pathname,\n      search,\n    });\n  };\n\n  return {\n    games,\n    score,\n    setGame: setParam,\n  };\n}\n","/** @jsx jsx */\nimport { css, jsx } from \"@emotion/core\";\nimport styled from \"@emotion/styled\";\nimport { useParam } from \"lib/hooks\";\nimport { PortColor } from \"lib/portColor\";\nimport React from \"react\";\nimport { Theme } from \"styles/theme\";\n\nimport { CharDisplay } from \"./CharDisplay\";\nimport { NameBlock } from \"./NameBlock\";\nimport { StatDisplay } from \"./StatDisplay\";\n\nconst Outer = styled.div`\n  position: relative;\n  width: 100%;\n  display: grid;\n  grid-template-columns: 20% 60% 20%;\n`;\n\nconst NameBlockContainer = styled.div<{\n  align: \"left\" | \"right\";\n}>`\n  ${(p) => `\n  width: 20%;\n  position: absolute;\n  ${p.align}: 0;\n  margin-${p.align}: 2rem;\n  bottom: 15%;\n  `}\n`;\n\nexport const RenderDisplay: React.FC<Theme> = (theme) => {\n  const [leftColor] = useParam(\"leftColor\", PortColor.P1);\n  const [rightColor] = useParam(\"rightColor\", PortColor.P2);\n  return (\n    <Outer>\n      <div\n        css={css`\n          justify-self: end;\n          width: 100%;\n        `}\n      >\n        <CharDisplay theme={leftColor} charParam=\"char1\" colorParam=\"color1\" align=\"right\" />\n      </div>\n      <StatDisplay leftColor={leftColor} rightColor={rightColor} {...theme} />\n      <div\n        css={css`\n          width: 100%;\n        `}\n      >\n        <CharDisplay theme={rightColor} charParam=\"char2\" colorParam=\"color2\" align=\"left\" />\n      </div>\n      <NameBlockContainer align=\"left\">\n        <NameBlock nameParam=\"name1\" subtitleParam=\"sub1\" {...theme} />\n      </NameBlockContainer>\n      <NameBlockContainer align=\"right\">\n        <NameBlock nameParam=\"name2\" subtitleParam=\"sub2\" {...theme} />\n      </NameBlockContainer>\n    </Outer>\n  );\n};\n","/** @jsx jsx */\nimport { css, jsx } from \"@emotion/core\";\nimport styled from \"@emotion/styled\";\nimport { ExternalLink as A } from \"components/ExternalLink\";\nimport { Header } from \"components/Header\";\nimport { Options } from \"containers/Options\";\nimport { useParam } from \"lib/hooks\";\nimport React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { GlobalTheme } from \"styles/theme\";\n\nimport { RenderDisplay } from \"../containers/RenderDisplay\";\nimport poweredByImage from \"../styles/images/powered-by.png\";\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  &:hover {\n    .settings {\n      opacity: 1;\n    }\n  }\n  .settings {\n    opacity: 0;\n    transition: opacity 0.2s ease-in-out;\n  }\n`;\n\nexport interface RenderViewProps {\n  showSlippiLogo?: boolean;\n}\n\nexport const RenderView: React.FC<RenderViewProps> = ({ showSlippiLogo }) => {\n  const [primaryColor] = useParam(\"primaryColor\");\n  const [secondaryColor] = useParam(\"secondaryColor\");\n  return (\n    <div\n      css={css`\n        width: 1700px;\n        height: 980px;\n        margin: 0 auto;\n      `}\n    >\n      <Container>\n        <GlobalTheme primaryColor={primaryColor} secondaryColor={secondaryColor} />\n        <Link to=\"/\" title=\"Home\">\n          <Header>Post Match Stats</Header>\n        </Link>\n        <div\n          css={css`\n            margin-bottom: ${showSlippiLogo ? \"2rem\" : \"4rem\"};\n            & > a {\n              display: ${showSlippiLogo ? \"block\" : \"none\"};\n            }\n          `}\n        >\n          <A href=\"https://slippi.gg\">\n            <img\n              alt=\"Powered by Slippi\"\n              title=\"Open Slippi.gg homepage\"\n              src={poweredByImage}\n              css={css`\n                max-height: 5rem;\n              `}\n            />\n          </A>\n        </div>\n        <RenderDisplay primaryColor={primaryColor} secondaryColor={secondaryColor} />\n        <div className=\"settings\">\n          <Options />\n        </div>\n      </Container>\n    </div>\n  );\n};\n","import React from \"react\";\nimport { hot } from \"react-hot-loader/root\";\nimport { BrowserRouter as Router, Route } from \"react-router-dom\";\nimport { RandomView } from \"views/RandomView\";\n\nimport { AppProvider } from \"./store\";\nimport { MainView } from \"./views/MainView\";\nimport { RenderView } from \"./views/RenderView\";\n\nconst App: React.FC = () => {\n  return (\n    <AppProvider>\n      <Router basename={process.env.PUBLIC_URL}>\n        <Route exact path=\"/\" component={MainView} />\n        <Route path=\"/render\" component={RenderView} />\n        <Route path=\"/random\" component={RandomView} />\n      </Router>\n    </AppProvider>\n  );\n};\n\nexport default hot(App);\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import \"./index.scss\";\n\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","/** @jsx jsx */\nimport { css, jsx } from \"@emotion/core\";\nimport styled from \"@emotion/styled\";\nimport React from \"react\";\nimport { hasOpacity } from \"styles/opacity\";\n\nexport const PrimaryButton = styled.button<{\n  backgroundColor: string;\n  color: string;\n}>`\n  background: ${(p) => p.backgroundColor};\n  border: none;\n  color: ${(p) => p.color};\n  cursor: pointer;\n  font: inherit;\n  padding: 1rem 0rem;\n  width: 100%;\n  font-weight: 700;\n  font-size: 3rem;\n  opacity: 0.8;\n  transition: opacity 0.2s ease-in-out;\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n  &:hover:enabled {\n    opacity: 1;\n  }\n`;\n\nexport const SecondaryButton: React.FC<Record<string, any>> = (props) => {\n  const { align, children, ...rest } = props;\n  const alignment = align || \"center\";\n  return (\n    <div\n      css={css`\n        user-select: none;\n        text-align: ${alignment};\n      `}\n    >\n      <span\n        css={css`\n          display: inline-block;\n          font-size: 1.4rem;\n          cursor: pointer;\n          margin: 0.5rem 0;\n          padding: 0 0.5rem;\n          ${hasOpacity(0.5)}\n          &:hover {\n            text-decoration: underline;\n          }\n        `}\n        {...rest}\n      >\n        {children}\n      </span>\n    </div>\n  );\n};\n","import { FrameEntryType } from \"@slippi/slippi-js\";\n\n/**\n * Given the last frame of the game, determine the winner first based on stock count\n * then based on remaining percent.\n * If percents are tied, return the player with the lower port number by default.\n *\n * @returns the player index of the winner\n */\nexport const findWinner = (lastFrame: FrameEntryType): number => {\n  const postFrameEntries = Object.keys(lastFrame.players).map((i: any) => (lastFrame.players[i] as any).post);\n  const winnerPostFrame = postFrameEntries.reduce((a, b) => {\n    // Determine winner based on stock count\n    if (a.stocksRemaining > b.stocksRemaining) {\n      return a;\n    }\n    if (a.stocksRemaining < b.stocksRemaining) {\n      return b;\n    }\n\n    // Stocks are the same so determine winner based off remaining percent\n    if (a.percent < b.percent) {\n      return a;\n    }\n    if (a.percent > b.percent) {\n      return b;\n    }\n\n    // Just return a by default\n    return a;\n  });\n\n  return winnerPostFrame.playerIndex;\n};\n","import { FrameEntryType, FramesType, GameEndType, GameStartType, MetadataType, StatsType } from \"@slippi/slippi-js\";\n\nexport enum Stat {\n  OPENINGS_PER_KILL = \"opk\",\n  DAMAGE_PER_OPENING = \"dpo\",\n  NEUTRAL_WINS = \"nw\",\n  KILL_MOVES = \"mckm\",\n  NEUTRAL_OPENER_MOVES = \"mcno\",\n  INPUTS_PER_MINUTE = \"ipm\",\n  AVG_KILL_PERCENT = \"akp\",\n  DAMAGE_DONE = \"tdd\",\n  EARLY_KILLS = \"ek\",\n  LATE_DEATHS = \"ld\",\n  SELF_DESTRUCTS = \"sd\",\n  HIGH_DAMAGE_PUNISHES = \"hdp\",\n\n  // Custom\n  FIRST_BLOOD = \"fb\",\n  L_CANCEL = \"lc\",\n}\n\nexport interface GameDetails {\n  filePath: string;\n  settings: GameStartType;\n  frames: FramesType;\n  stats: StatsType;\n  metadata: MetadataType;\n  latestFrame: FrameEntryType | null;\n  gameEnd: GameEndType | null;\n}\n\nexport interface StatCalculationResult {\n  result: any;\n  simple: any;\n}\n\nexport type StatCalculation = (games: GameDetails[], playerIndex: number) => StatCalculationResult;\n\nexport interface StatDefinition {\n  name: string;\n  type: string;\n  betterDirection?: string;\n  recommendedRounding?: number;\n  calculate: StatCalculation;\n}\n"],"sourceRoot":""}